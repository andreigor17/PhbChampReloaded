<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="vercel.xhtml">

    <ui:define name="content">
        <h:form id="formPartidaTempoReal">
            
            <!-- Header -->
            <div class="section-header">
                <div>
                    <h1 class="section-title">
                        <i class="pi pi-eye mr-2"></i>
                        Partida em Tempo Real
                    </h1>
                    <p class="section-description">
                        Monitoramento ao vivo via MatchZy - Eventos e dados da partida em tempo real
                    </p>
                </div>
                <div class="header-actions">
                    <p:outputPanel id="statusPanel">
                        <div class="connection-badge #{managerPartidaTempoReal.matchData.conectado ? 'connected' : 'disconnected'}">
                            <span class="status-dot"></span>
                            <span class="status-text">#{managerPartidaTempoReal.matchData.conectado ? 'Recebendo eventos do MatchZy' : 'Aguardando eventos do MatchZy'}</span>
                        </div>
                    </p:outputPanel>
                    <p:commandButton value="Atualizar" 
                                     icon="pi pi-refresh" 
                                     action="#{managerPartidaTempoReal.atualizarDados()}"
                                     update="@form"
                                     styleClass="p-button-outlined ml-2" />
                </div>
            </div>

            <!-- Informações da Partida do Sistema (quando associada) -->
            <div class="grid mb-4" rendered="#{managerPartidaTempoReal.matchData.partidaId != null}">
                <div class="col-12">
                    <p:card styleClass="system-match-card">
                        <f:facet name="title">
                            <i class="pi pi-info-circle mr-2"></i>
                            Partida do Sistema
                        </f:facet>
                        <div class="system-match-info">
                            <div class="system-match-row">
                                <div class="system-match-item">
                                    <strong>ID:</strong> #{managerPartidaTempoReal.matchData.partidaId}
                                </div>
                                <div class="system-match-item" rendered="#{managerPartidaTempoReal.matchData.partidaNome != null}">
                                    <strong>Nome:</strong> #{managerPartidaTempoReal.matchData.partidaNome}
                                </div>
                                <div class="system-match-item" rendered="#{managerPartidaTempoReal.matchData.matchZyMatchId != null}">
                                    <strong>MatchZy ID:</strong> #{managerPartidaTempoReal.matchData.matchZyMatchId}
                                </div>
                            </div>
                            <div class="system-match-row" rendered="#{managerPartidaTempoReal.matchData.partidaTimeVencedor != null or managerPartidaTempoReal.matchData.partidaTimePerdedor != null}">
                                <div class="system-match-item" rendered="#{managerPartidaTempoReal.matchData.partidaTimeVencedor != null}">
                                    <strong>Time Vencedor:</strong> 
                                    <span class="winner-badge">#{managerPartidaTempoReal.matchData.partidaTimeVencedor}</span>
                                </div>
                                <div class="system-match-item" rendered="#{managerPartidaTempoReal.matchData.partidaTimePerdedor != null}">
                                    <strong>Time Perdedor:</strong> #{managerPartidaTempoReal.matchData.partidaTimePerdedor}
                                </div>
                            </div>
                        </div>
                    </p:card>
                </div>
            </div>

            <!-- Informações Gerais da Partida -->
            <div class="grid mb-4">
                <div class="col-12 md:col-3">
                    <p:card styleClass="info-card">
                        <f:facet name="title">
                            <i class="pi pi-map mr-2"></i>
                            Mapa
                        </f:facet>
                        <div class="info-value">
                            #{managerPartidaTempoReal.matchData.mapa != null ? managerPartidaTempoReal.matchData.mapa : 'N/A'}
                        </div>
                    </p:card>
                </div>
                
                <div class="col-12 md:col-4">
                    <p:card styleClass="info-card">
                        <f:facet name="title">
                            <i class="pi pi-circle mr-2"></i>
                            Round Atual
                        </f:facet>
                        <div class="info-value">
                            #{managerPartidaTempoReal.matchData.roundAtual != null ? managerPartidaTempoReal.matchData.roundAtual : 'N/A'}
                        </div>
                    </p:card>
                </div>
                
                <div class="col-12 md:col-4">
                    <p:card styleClass="info-card #{managerPartidaTempoReal.matchData.fase == 'live' ? 'live-round' : ''}">
                        <f:facet name="title">
                            <i class="pi pi-info-circle mr-2"></i>
                            Fase
                        </f:facet>
                        <div class="info-value fase-text">
                            #{managerPartidaTempoReal.matchData.fase != null ? 
                                (managerPartidaTempoReal.matchData.fase == 'freezetime' ? 'FREEZE TIME' : 
                                 managerPartidaTempoReal.matchData.fase == 'live' ? 'EM ANDAMENTO' :
                                 managerPartidaTempoReal.matchData.fase == 'over' ? 'FINALIZADO' :
                                 managerPartidaTempoReal.matchData.fase.toUpperCase()) : 'N/A'}
                        </div>
                    </p:card>
                </div>
            </div>

            <!-- Placar -->
            <div class="grid mb-4">
                <div class="col-12">
                    <p:card styleClass="score-card">
                        <div class="score-container">
                            <div class="team-score team-ct">
                                <div class="team-header">
                                    <i class="pi pi-shield"></i>
                                    <span>#{managerPartidaTempoReal.matchData.nomeTimeCT != null ? managerPartidaTempoReal.matchData.nomeTimeCT : 'Counter-Terrorists'}</span>
                                </div>
                                <div class="score-value">#{managerPartidaTempoReal.matchData.scoreCT}</div>
                            </div>
                            
                            <div class="score-separator">
                                <span>VS</span>
                            </div>
                            
                            <div class="team-score team-t">
                                <div class="team-header">
                                    <i class="pi pi-bomb"></i>
                                    <span>#{managerPartidaTempoReal.matchData.nomeTimeT != null ? managerPartidaTempoReal.matchData.nomeTimeT : 'Terrorists'}</span>
                                </div>
                                <div class="score-value">#{managerPartidaTempoReal.matchData.scoreT}</div>
                            </div>
                        </div>
                    </p:card>
                </div>
            </div>

            <!-- Players e Eventos -->
            <div class="grid">
                <!-- Time CT -->
                <div class="col-12">
                    <p:card styleClass="team-card team-ct-card">
                        <f:facet name="title">
                            <i class="pi pi-shield mr-2"></i>
                            #{managerPartidaTempoReal.matchData.nomeTimeCT != null ? managerPartidaTempoReal.matchData.nomeTimeCT : 'Counter-Terrorists'} (#{managerPartidaTempoReal.matchData.playersCT.size()})
                        </f:facet>
                        
                        <div class="players-list">
                            <ui:repeat value="#{managerPartidaTempoReal.matchData.playersCT}" var="player">
                                <div class="player-card">
                                    <div class="player-header">
                                        <div class="player-name-container">
                                            <div class="player-name">#{player.nome}</div>
                                            <div class="player-steam-id" rendered="#{player.steamId != null}">
                                                <i class="pi pi-user"></i>
                                                <span>#{player.steamId}</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="player-stats">
                                        <div class="stat-item">
                                            <i class="pi pi-crosshairs"></i>
                                            <span>K: <strong>#{player.kills}</strong></span>
                                        </div>
                                        <div class="stat-item">
                                            <i class="pi pi-times-circle"></i>
                                            <span>D: <strong>#{player.deaths}</strong></span>
                                        </div>
                                        <div class="stat-item">
                                            <i class="pi pi-check-circle"></i>
                                            <span>A: <strong>#{player.assists}</strong></span>
                                        </div>
                                        <div class="stat-item">
                                            <i class="pi pi-bolt"></i>
                                            <span>DMG: <strong>#{player.damage}</strong></span>
                                        </div>
                                    </div>
                                </div>
                            </ui:repeat>
                            
                            <div class="empty-state" rendered="#{empty managerPartidaTempoReal.matchData.playersCT}">
                                <i class="pi pi-users"></i>
                                <p>Nenhum jogador CT</p>
                                <p class="empty-subtext">Aguardando dados do MatchZy</p>
                            </div>
                        </div>
                    </p:card>
                </div>

                <!-- Time T -->
                <div class="col-12">
                    <p:card styleClass="team-card team-t-card">
                        <f:facet name="title">
                            <i class="pi pi-bomb mr-2"></i>
                            #{managerPartidaTempoReal.matchData.nomeTimeT != null ? managerPartidaTempoReal.matchData.nomeTimeT : 'Terrorists'} (#{managerPartidaTempoReal.matchData.playersT.size()})
                        </f:facet>
                        
                        <div class="players-list">
                            <ui:repeat value="#{managerPartidaTempoReal.matchData.playersT}" var="player">
                                <div class="player-card">
                                    <div class="player-header">
                                        <div class="player-name-container">
                                            <div class="player-name">#{player.nome}</div>
                                            <div class="player-steam-id" rendered="#{player.steamId != null}">
                                                <i class="pi pi-user"></i>
                                                <span>#{player.steamId}</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="player-stats">
                                        <div class="stat-item">
                                            <i class="pi pi-crosshairs"></i>
                                            <span>K: <strong>#{player.kills}</strong></span>
                                        </div>
                                        <div class="stat-item">
                                            <i class="pi pi-times-circle"></i>
                                            <span>D: <strong>#{player.deaths}</strong></span>
                                        </div>
                                        <div class="stat-item">
                                            <i class="pi pi-check-circle"></i>
                                            <span>A: <strong>#{player.assists}</strong></span>
                                        </div>
                                        <div class="stat-item">
                                            <i class="pi pi-bolt"></i>
                                            <span>DMG: <strong>#{player.damage}</strong></span>
                                        </div>
                                    </div>
                                </div>
                            </ui:repeat>
                            
                            <div class="empty-state" rendered="#{empty managerPartidaTempoReal.matchData.playersT}">
                                <i class="pi pi-users"></i>
                                <p>Nenhum jogador T</p>
                                <p class="empty-subtext">Aguardando dados do MatchZy</p>
                            </div>
                        </div>
                    </p:card>
                </div>

                <!-- Eventos Recentes -->
                <div class="col-12">
                    <p:card styleClass="events-card">
                        <f:facet name="title">
                            <i class="pi pi-list mr-2"></i>
                            Eventos Recentes
                        </f:facet>
                        
                        <div class="events-list">
                            <ui:repeat value="#{managerPartidaTempoReal.matchData.eventosRecentes}" var="evento">
                                <div class="event-item">
                                    <i class="pi pi-circle-fill event-dot"></i>
                                    <span class="event-text">#{evento}</span>
                                </div>
                            </ui:repeat>
                            
                            <div class="empty-state" rendered="#{empty managerPartidaTempoReal.matchData.eventosRecentes}">
                                <i class="pi pi-bell"></i>
                                <p>Nenhum evento ainda</p>
                                <p class="empty-subtext">Eventos do MatchZy aparecerão aqui em tempo real</p>
                            </div>
                        </div>
                    </p:card>
                </div>
            </div>

            <!-- Última Atualização -->
            <div class="grid mt-3">
                <div class="col-12">
                    <p class="update-info">
                        <i class="pi pi-clock mr-2"></i>
                        Última atualização: #{managerPartidaTempoReal.matchData.ultimaAtualizacao != null ? managerPartidaTempoReal.matchData.ultimaAtualizacao : 'Nunca'}
                    </p>
                </div>
            </div>

            <!-- Polling automático - sempre ativo -->
            <p:poll id="pollPartidaTempoReal"
                   interval="2" 
                   listener="#{managerPartidaTempoReal.atualizarDados()}" 
                   update="@form"
                   async="true"
                   autoStart="true"
                   onerror="handleViewExpired(); return false;" />
        </h:form>

        <!-- Script para manter sessão/view ativa e tratar erros -->
        <script type="text/javascript">
            var viewExpiredHandled = false;
            
            // Tratamento de ViewExpiredException
            function handleViewExpired() {
                if (viewExpiredHandled) {
                    return; // Evita múltiplos recarregamentos
                }
                viewExpiredHandled = true;
                console.warn('ViewExpiredException detectada - recarregando página...');
                setTimeout(function() {
                    window.location.href = window.location.pathname + '?reload=' + Date.now();
                }, 500);
            }
            
            // Intercepta erros AJAX do PrimeFaces ANTES do polling
            if (typeof PrimeFaces !== 'undefined') {
                // Intercepta todos os erros AJAX
                PrimeFaces.ajax.addOnError(function(xhr, status, error) {
                    var shouldReload = false;
                    
                    // Verifica se é ViewExpiredException ou erro de UIViewRoot
                    if (xhr.responseText) {
                        var responseText = xhr.responseText.toLowerCase();
                        if (responseText.indexOf('viewexpiredexception') !== -1 || 
                            responseText.indexOf('viewid') !== -1 ||
                            responseText.indexOf('uiviewroot') !== -1 ||
                            responseText.indexOf('addremovelistener') !== -1 ||
                            (responseText.indexOf('view') !== -1 &amp;&amp; responseText.indexOf('não pode ser restaurada') !== -1) ||
                            responseText.indexOf('cannot be restored') !== -1) {
                            shouldReload = true;
                        }
                    }
                    
                    // Verifica status HTTP que pode indicar view expirada
                    if (!shouldReload &amp;&amp; (xhr.status === 500 || xhr.status === 403)) {
                        if (xhr.responseText) {
                            var responseText = xhr.responseText.toLowerCase();
                            if (responseText.indexOf('view') !== -1 || responseText.indexOf('expired') !== -1) {
                                shouldReload = true;
                            }
                        }
                    }
                    
                    if (shouldReload) {
                        console.warn('Erro de view detectado via AJAX - parando polling e recarregando...');
                        // Para o polling antes de recarregar
                        try {
                            var pollWidget = PrimeFaces.getWidgetById('formPartidaTempoReal:pollPartidaTempoReal');
                            if (pollWidget &amp;&amp; typeof pollWidget.stop === 'function') {
                                pollWidget.stop();
                            }
                        } catch(e) {
                            // Ignora erro ao parar polling
                        }
                        handleViewExpired();
                        return false; // Previne o tratamento padrão
                    }
                });
            }
            
            // Mantém a view/sessão ativa fazendo requisições periódicas
            // Requisições a cada 30 segundos para manter a view ativa
            (function() {
                var keepAliveInterval = 30 * 1000; // 30 segundos em milissegundos
                
                function keepViewAlive() {
                    try {
                        // Usa PrimeFaces para fazer uma requisição que mantém a view ativa
                        if (typeof PrimeFaces !== 'undefined' &amp;&amp; PrimeFaces.ajax) {
                            // Faz uma requisição AJAX simples que toca na view
                            PrimeFaces.ajax.RequestQueue.add({
                                source: document.getElementById('formPartidaTempoReal'),
                                process: '@none',
                                update: '@none',
                                async: true,
                                global: false,
                                onerror: function(xhr, status, error) {
                                    // Se der erro de view expirada, recarrega
                                    if (xhr.responseText &amp;&amp; (xhr.responseText.indexOf('ViewExpiredException') !== -1)) {
                                        handleViewExpired();
                                    }
                                },
                                oncomplete: function(xhr, status) {
                                    // Verifica se a resposta contém erro de view expirada
                                    if (xhr.responseText &amp;&amp; (xhr.responseText.indexOf('ViewExpiredException') !== -1)) {
                                        handleViewExpired();
                                    } else {
                                        console.log('View mantida ativa: ' + new Date().toLocaleTimeString());
                                    }
                                }
                            });
                        } else {
                            // Fallback: requisição XMLHttpRequest simples
                            var xhr = new XMLHttpRequest();
                            var url = window.location.href.split('?')[0] + '?keepAlive=' + Date.now();
                            xhr.open('GET', url, true);
                            xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');
                            xhr.onreadystatechange = function() {
                                if (xhr.readyState === 4) {
                                    if (xhr.status === 200) {
                                        // Verifica se a resposta contém erro
                                        if (xhr.responseText &amp;&amp; (xhr.responseText.indexOf('ViewExpiredException') !== -1)) {
                                            handleViewExpired();
                                        } else {
                                            console.log('View mantida ativa: ' + new Date().toLocaleTimeString());
                                        }
                                    } else if (xhr.status === 500 || xhr.status === 403) {
                                        // Pode ser ViewExpiredException
                                        handleViewExpired();
                                    }
                                }
                            };
                            xhr.send();
                        }
                    } catch (e) {
                        console.warn('Erro ao manter view ativa:', e);
                    }
                }
                
                // Inicia o keep-alive imediatamente e depois a cada 30 segundos
                keepViewAlive();
                var keepAliveTimer = setInterval(keepViewAlive, keepAliveInterval);
                
                // Também mantém ativo quando a página recebe foco (usuário volta à aba)
                window.addEventListener('focus', function() {
                    keepViewAlive();
                });
                
                // Mantém ativo quando há atividade do usuário (scroll, click, etc)
                var activityEvents = ['mousedown', 'mousemove', 'keypress', 'scroll', 'touchstart'];
                activityEvents.forEach(function(eventName) {
                    document.addEventListener(eventName, function() {
                        // Faz keep-alive após 1 minuto de inatividade
                        clearTimeout(window.activityTimeout);
                        window.activityTimeout = setTimeout(keepViewAlive, 60000);
                    }, true);
                });
                
                // Limpa o timer quando a página é fechada (boa prática)
                window.addEventListener('beforeunload', function() {
                    if (keepAliveTimer) {
                        clearInterval(keepAliveTimer);
                    }
                    if (window.activityTimeout) {
                        clearTimeout(window.activityTimeout);
                    }
                });
            })();
        </script>

        <style type="text/css">
            /* Section Header */
            .section-header {
                display: flex;
                align-items: center;
                justify-content: space-between;
                margin-bottom: 2rem;
                padding: 1.5rem;
                background: linear-gradient(135deg, var(--bg-800), var(--bg-900));
                border-radius: var(--radius);
                border: 1px solid var(--border);
                box-shadow: var(--shadow);
            }

            .section-description {
                color: var(--text-300);
                margin: 0.5rem 0 0;
                font-size: 0.9rem;
            }

            .header-actions {
                display: flex;
                align-items: center;
                gap: 0.5rem;
            }

            /* Connection Badge */
            .connection-badge {
                display: flex;
                align-items: center;
                gap: 0.5rem;
                padding: 0.5rem 1rem;
                border-radius: 20px;
                font-weight: 600;
                font-size: 0.875rem;
                transition: all 0.3s;
            }

            .connection-badge.connected {
                background: rgba(34, 197, 94, 0.1);
                border: 2px solid var(--success);
                color: var(--success);
            }

            .connection-badge.disconnected {
                background: rgba(239, 68, 68, 0.1);
                border: 2px solid #ef4444;
                color: #ef4444;
            }

            .status-dot {
                width: 8px;
                height: 8px;
                border-radius: 50%;
                animation: blink 1.5s infinite;
            }

            .connected .status-dot {
                background: var(--success);
                box-shadow: 0 0 8px var(--success);
            }

            .disconnected .status-dot {
                background: #ef4444;
                box-shadow: 0 0 8px #ef4444;
            }

            /* Info Cards */
            .info-card {
                text-align: center;
                transition: all 0.3s;
            }

            .info-card.live-round {
                border: 2px solid rgba(34, 197, 94, 0.5);
                animation: pulse-live 2s infinite;
            }

            .info-value {
                font-size: 2rem;
                font-weight: 700;
                color: var(--accent);
                margin-top: 0.5rem;
            }

            .timer-value {
                font-family: 'Consolas', 'Monaco', monospace;
                color: var(--accent-2);
            }

            .fase-badge {
                margin-top: 0.5rem;
                padding: 0.25rem 0.75rem;
                border-radius: 12px;
                font-size: 0.75rem;
                font-weight: 600;
                background: rgba(255,255,255,0.1);
                color: var(--text-200);
                display: inline-block;
            }

            .fase-text {
                text-transform: uppercase;
                font-size: 1.2rem;
            }

            /* Score Card */
            .score-card {
                background: linear-gradient(135deg, var(--bg-800), var(--bg-900)) !important;
            }

            .score-container {
                display: flex;
                align-items: center;
                justify-content: space-around;
                padding: 2rem;
            }

            .team-score {
                flex: 1;
                text-align: center;
            }

            .team-header {
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 0.5rem;
                font-size: 1.1rem;
                font-weight: 600;
                margin-bottom: 1rem;
                color: var(--text-200);
            }

            .team-ct .team-header {
                color: #4a9eff;
            }

            .team-t .team-header {
                color: #ff6b35;
            }

            .score-value {
                font-size: 4rem;
                font-weight: 800;
                color: var(--text-100);
            }

            .team-ct .score-value {
                color: #4a9eff;
            }

            .team-t .score-value {
                color: #ff6b35;
            }

            .score-separator {
                font-size: 1.5rem;
                font-weight: 700;
                color: var(--text-300);
                padding: 0 2rem;
            }

            /* Team Cards */
            .team-card {
                margin-bottom: 2rem;
            }

            .team-ct-card {
                border-left: 4px solid #4a9eff;
            }

            .team-t-card {
                border-left: 4px solid #ff6b35;
            }

            .players-list {
                display: flex;
                flex-direction: column;
                gap: 0.75rem;
                max-height: 500px;
                overflow-y: auto;
            }

            .players-list::-webkit-scrollbar {
                width: 6px;
            }

            .players-list::-webkit-scrollbar-track {
                background: rgba(255,255,255,0.02);
                border-radius: 4px;
            }

            .players-list::-webkit-scrollbar-thumb {
                background: rgba(0,225,255,0.3);
                border-radius: 4px;
            }

            /* Player Card */
            .player-card {
                background: rgba(255,255,255,0.03);
                border: 1px solid var(--border);
                border-radius: 10px;
                padding: 1rem;
                transition: all 0.2s ease;
            }

            .player-card:hover {
                background: rgba(255,255,255,0.06);
                border-color: var(--accent);
                transform: translateY(-2px);
                box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            }

            .player-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 0.75rem;
            }

            .player-name-container {
                display: flex;
                flex-direction: column;
                gap: 0.25rem;
            }

            .player-name {
                font-weight: 600;
                color: var(--text-100);
                font-size: 1rem;
            }

            .player-steam-id {
                font-size: 0.75rem;
                color: var(--text-400);
                display: flex;
                align-items: center;
                gap: 0.25rem;
            }

            .player-status {
                display: flex;
                align-items: center;
                gap: 0.5rem;
                font-size: 0.875rem;
                padding: 0.25rem 0.75rem;
                border-radius: 20px;
                font-weight: 600;
            }

            .player-status.alive {
                background: rgba(34, 197, 94, 0.15);
                color: var(--success);
                border: 1px solid rgba(34, 197, 94, 0.3);
            }

            .player-status.dead {
                background: rgba(239, 68, 68, 0.15);
                color: #ef4444;
                border: 1px solid rgba(239, 68, 68, 0.3);
            }

            .player-stats {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
                gap: 1rem;
                margin-top: 1rem;
            }

            .stat-item {
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 0.5rem;
                color: var(--text-200);
                font-size: 1rem;
                padding: 0.5rem;
                background: rgba(255,255,255,0.03);
                border-radius: 8px;
                border: 1px solid rgba(255,255,255,0.05);
            }

            .stat-item i {
                color: var(--accent);
            }

            .stat-item strong {
                color: var(--text-100);
            }

            /* Events Card */
            .events-card {
                height: 100%;
                border-left: 4px solid var(--accent);
            }

            .events-list {
                display: flex;
                flex-direction: column;
                gap: 0.75rem;
                max-height: 500px;
                overflow-y: auto;
            }

            .events-list::-webkit-scrollbar {
                width: 6px;
            }

            .events-list::-webkit-scrollbar-track {
                background: rgba(255,255,255,0.02);
                border-radius: 4px;
            }

            .events-list::-webkit-scrollbar-thumb {
                background: rgba(0,225,255,0.3);
                border-radius: 4px;
            }

            .event-item {
                display: flex;
                align-items: flex-start;
                gap: 0.75rem;
                padding: 0.75rem;
                background: rgba(255,255,255,0.03);
                border-left: 3px solid var(--accent);
                border-radius: 5px;
                transition: all 0.2s;
            }

            .event-item:hover {
                background: rgba(255,255,255,0.06);
                transform: translateX(5px);
            }

            .event-dot {
                font-size: 0.5rem;
                color: var(--accent);
                margin-top: 0.5rem;
                flex-shrink: 0;
            }

            .event-text {
                color: var(--text-200);
                font-size: 0.875rem;
                line-height: 1.5;
                flex: 1;
            }

            /* Empty State */
            .empty-state {
                text-align: center;
                padding: 3rem 1rem;
                color: var(--text-300);
            }

            .empty-state i {
                font-size: 3rem;
                color: var(--text-300);
                margin-bottom: 1rem;
            }

            .empty-state p {
                margin: 0;
                font-size: 1rem;
            }

            .empty-subtext {
                font-size: 0.875rem !important;
                margin-top: 0.5rem !important;
                color: var(--text-400) !important;
            }

            /* Update Info */
            .update-info {
                text-align: center;
                color: var(--text-300);
                font-size: 0.875rem;
                margin: 0;
            }

            /* Animations */
            @keyframes blink {
                0%, 50% {
                    opacity: 1;
                }
                51%, 100% {
                    opacity: 0.3;
                }
            }

            @keyframes pulse-live {
                0%, 100% {
                    box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.4);
                }
                50% {
                    box-shadow: 0 0 0 8px rgba(34, 197, 94, 0);
                }
            }

            /* System Match Card */
            .system-match-card {
                background: linear-gradient(135deg, rgba(0, 225, 255, 0.1), var(--bg-900)) !important;
                border-left: 4px solid var(--accent) !important;
            }

            .system-match-info {
                display: flex;
                flex-direction: column;
                gap: 1rem;
                padding: 1rem;
            }

            .system-match-row {
                display: flex;
                flex-wrap: wrap;
                gap: 1.5rem;
                align-items: center;
            }

            .system-match-item {
                color: var(--text-200);
                font-size: 0.95rem;
            }

            .system-match-item strong {
                color: var(--text-100);
                margin-right: 0.5rem;
            }

            .winner-badge {
                padding: 0.25rem 0.75rem;
                background: rgba(34, 197, 94, 0.2);
                border: 1px solid var(--success);
                border-radius: 12px;
                color: var(--success);
                font-weight: 600;
            }

            /* Responsive */
            @media (max-width: 768px) {
                .score-container {
                    flex-direction: column;
                    gap: 1rem;
                }

                .score-separator {
                    padding: 1rem 0;
                }

                .section-header {
                    flex-direction: column;
                    align-items: flex-start;
                    gap: 1rem;
                }
            }
        </style>
    </ui:define>
</ui:composition>
