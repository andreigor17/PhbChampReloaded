<ui:composition template="vercel.xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                xmlns:fox="http://java.sun.com/jsf/composite/fox">

    <ui:define name="title">
        Campeonatos
    </ui:define>

    <ui:define name="content">
        <h:form id="formIndexCamp">
            <p:growl id="messages" showDetail="false" />

            <!-- Header -->
            <p:card styleClass="glass-card mb-4">
                <div class="flex justify-content-between align-items-center flex-wrap gap-3">
                    <div class="flex-1">
                        <div class="flex align-items-center mb-2">
                            <i class="pi pi-trophy mr-3" style="font-size: 1.8rem; color: var(--accent)"></i>
                            <h1 class="m-0" style="font-weight: 800; font-size: 1.8rem; color: var(--text-100)">Campeonatos</h1>
                        </div>
                        <p class="m-0" style="color: #d1d8e6">Gerencie todos os campeonatos</p>
                    </div>
                    <div class="flex gap-2">
                        <p:button value="Criar Campeonato" icon="pi pi-plus" outcome="criarCampeonato.xhtml" styleClass="p-button-outlined full-stats-btn" />
                        <p:button value="Pesquisar" icon="pi pi-search" outcome="pesquisarCampeonato.xhtml" styleClass="p-button-text" />
                    </div>
                </div>
            </p:card>

            <!-- Grid de Cards de Campeonatos -->
            <div class="grid">
                <ui:repeat value="#{managerCamp.camps}" var="campeonato">
                    <div class="col-12 sm:col-6 lg:col-4">
                        <p:card styleClass="glass-card h-full champ-card">
                            <div class="champ-header">
                                <div class="champ-logo">
                                    <i class="pi pi-trophy"></i>
                                </div>
                                <div class="champ-status-badge">
                                    <h:panelGroup rendered="#{campeonato.status.nome eq 'Em Andamento'}">
                                        <span class="status-tag live">
                                            <i class="pi pi-circle-fill"></i>
                                            <h:outputText value="Em Andamento" />
                                        </span>
                                    </h:panelGroup>
                                    <h:panelGroup rendered="#{campeonato.status.nome eq 'Finalizado'}">
                                        <span class="status-tag finished">Finalizado</span>
                                    </h:panelGroup>
                                    <h:panelGroup rendered="#{campeonato.status.nome eq 'Agendado'}">
                                        <span class="status-tag scheduled">Agendado</span>
                                    </h:panelGroup>
                                </div>
                            </div>

                            <div class="champ-body">
                                <h:link value="#{campeonato.nome}" 
                                        outcome="visualizarCampeonato.xhtml" 
                                        styleClass="champ-title">
                                    <f:param name="id" value="#{campeonato.id}" />
                                </h:link>
                                <p class="champ-subtitle" style="color: #cfd8e6">#{campeonato.jogo.nome}</p>
                                
                                <div class="champ-info-grid">
                                    <div class="info-item-small">
                                        <i class="pi pi-users info-icon"></i>
                                        <div>
                                            <p class="info-value">#{managerCamp.getTimesConfirmados(campeonato)}</p>
                                            <p class="info-label">Times</p>
                                        </div>
                                    </div>
                                    <div class="info-item-small">
                                        <i class="pi pi-calendar info-icon"></i>
                                        <div>
                                            <p class="info-value">#{managerCamp.formataData(campeonato.dataCamp)}</p>
                                            <p class="info-label">Data</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="champ-footer">
                                <p:button value="Ver Detalhes" 
                                         icon="pi pi-eye" 
                                         outcome="visualizarCampeonato.xhtml"
                                         styleClass="action-btn w-full">
                                    <f:param name="id" value="#{campeonato.id}" />
                                </p:button>
                            </div>
                        </p:card>
                    </div>
                </ui:repeat>
            </div>

            <!-- Mensagem vazia -->
            <h:panelGroup rendered="#{empty managerCamp.camps}">
                <p:card styleClass="glass-card">
                    <div class="text-center py-6">
                        <i class="pi pi-inbox mb-3" style="font-size: 3rem; color: var(--muted)"></i>
                        <p class="text-xl m-0" style="color: #d1d8e6">Nenhum campeonato encontrado</p>
                    </div>
                </p:card>
            </h:panelGroup>

        </h:form>

        <style>
            .champ-card { height: 100%; transition: all .2s ease; }
            .champ-card:hover { transform: translateY(-4px); box-shadow: var(--surface-shadow), 0 0 0 1px rgba(0,225,255,0.1); }
            
            .champ-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; }
            .champ-logo { width: 48px; height: 48px; border-radius: 12px; display: flex; align-items: center; justify-content: center; color: var(--warning); background: linear-gradient(135deg, rgba(255,255,255,0.06), rgba(255,255,255,0.03)); border: 1px solid rgba(255,255,255,0.12); font-size: 1.3rem; }
            
            .champ-body { flex: 1; }
            .champ-title { display: block; font-weight: 800; font-size: 1.15rem; color: var(--text-100); margin-bottom: .35rem; text-decoration: none; transition: color .2s ease; }
            .champ-title:hover { color: var(--accent); }
            .champ-subtitle { font-size: .9rem; margin-bottom: 1rem; }
            
            .champ-info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: .5rem; }
            .info-item-small { display: flex; align-items: center; gap: .5rem; }
            .info-icon { color: var(--accent); font-size: 1rem; }
            .info-value { font-weight: 800; font-size: 1rem; color: var(--text-100); margin: 0; }
            .info-label { font-size: .7rem; text-transform: uppercase; letter-spacing: .4px; color: var(--text-300); margin: 0; }
            
            .champ-footer { margin-top: 1rem; }
            
            /* Status tags reus√°veis */
            .status-tag { display: inline-flex; align-items: center; gap: .4rem; padding: .25rem .6rem; border-radius: 999px; font-weight: 700; font-size: .78rem; }
            .status-tag.live { background: rgba(34,197,94,0.12); color: var(--success); border: 1px solid rgba(34,197,94,0.25); }
            .status-tag.scheduled { background: rgba(59,130,246,0.12); color: #60a5fa; border: 1px solid rgba(59,130,246,0.25); }
            .status-tag.finished { background: rgba(255,255,255,0.06); color: var(--text-100); border: 1px solid rgba(255,255,255,0.15); }
            .status-tag .pi-circle-fill { font-size: .5rem; }
        </style>
    </ui:define>
</ui:composition>
