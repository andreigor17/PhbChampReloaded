<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="vercel.xhtml">

    <ui:define name="content">
        <h:form id="formCampeonato" enctype="multipart/form-data">
            
            <!-- Cabeçalho -->
            <div class="surface-card shadow-2 border-round mb-4 p-4">
                <div class="flex justify-content-between align-items-center flex-wrap gap-3">
                    <div class="flex-1">
                        <div class="flex align-items-center mb-2">
                            <i class="pi pi-trophy text-4xl mr-3"></i>
                            <h1 class="text-900 font-bold text-4xl m-0">Criar Novo Campeonato</h1>
                        </div>
                        <p class="text-600 text-lg m-0">Preencha as informações para criar um novo campeonato</p>
                    </div>
                    <div class="flex gap-2">
                        <p:commandButton value="Cancelar" 
                                         icon="pi pi-times"
                                         styleClass="p-button-outlined p-button-secondary"
                                         action="/campeonatos?faces-redirect=true"
                                         immediate="true"
                                         process="@this" />                       
                    </div>
                </div>
            </div>

            

            <!-- Card: Informações Básicas -->
            <div class="surface-card shadow-2 border-round mb-4 p-4">
                <h2 class="text-900 font-bold text-2xl mb-4">
                    <i class="pi pi-info-circle mr-2"></i>Informações Básicas
                </h2>

                <div class="formgrid grid">
                    <!-- Nome -->
                    <div class="field col-12 md:col-8">
                        <label for="campNome" class="block mb-2 font-medium">Nome do Campeonato *</label>
                        <p:inputText id="campNome" 
                                     value="#{managerCriarCampeonato.camp.nome}"
                                     placeholder="Ex: Campeonato Brasileiro 2024"
                                     required="true"
                                     requiredMessage="Nome é obrigatório"
                                     styleClass="w-full" />
                    </div>

                    <!-- Status -->
                    <div class="field col-12 md:col-4">
                        <label for="campStatus" class="block mb-2 font-medium">Status *</label>
                        <p:selectOneMenu id="campStatus" 
                                         value="#{managerCriarCampeonato.camp.status}"
                                         required="true"
                                         requiredMessage="Status é obrigatório"
                                         styleClass="w-full">
                            <f:selectItem itemLabel="Selecione" itemValue="" noSelectionOption="true" />
                            <f:selectItems value="#{enums.statusCamp()}" />
                        </p:selectOneMenu>
                    </div>

                    <!-- Data Início -->
                    <div class="field col-12 md:col-4">
                        <label for="campDataInicio" class="block mb-2 font-medium">Data de Início *</label>
                        <p:datePicker id="campDataInicio" value="#{managerCriarCampeonato.camp.dataCamp}" 
                                              pattern="dd/MM/yyyy HH:mm" hourFormat="24" showIcon="true" showTime="true" styleClass="w-full" />
                    </div>

                    <!-- Data Final -->
                    <div class="field col-12 md:col-4">
                        <label for="campDataFinal" class="block mb-2 font-medium">Término das Inscrições *</label>
                        <p:datePicker id="campDataFinal" value="#{managerCriarCampeonato.camp.dataPrazoCamp}" 
                                              pattern="dd/MM/yyyy HH:mm" hourFormat="24" showIcon="true" showTime="true" styleClass="w-full" />
                    </div>

                    <!-- Jogo -->
                    <div class="field col-12 md:col-4">
                        <label for="campJogo" class="block mb-2 font-medium">Jogo *</label>
                        <p:autoComplete id="localAutoComplete" value="#{managerCriarCampeonato.camp.jogo}"
                                                forceSelection="true" dropdown="true" var="localPartida" itemValue="#{jogo}" scrollHeight="200"
                                                itemLabel="#{jogo.nome}" completeMethod="#{managerAutoCompletes.autoCompletaJogos()}"
                                                converter="jogo_converter"  />
                    </div>
                </div>
            </div>

            <div class="grid">
                <!-- Card: Configurações -->
                <div class="col-12 lg:col-6">
                    <div class="surface-card shadow-2 border-round p-4 h-full">
                        <h2 class="text-900 font-bold text-2xl mb-4">
                            <i class="pi pi-cog mr-2"></i>Configurações
                        </h2>

                        <!-- Categoria -->
                        <div class="field mb-4">
                            <label for="campCategoria" class="block mb-3 font-medium">Categoria *</label>
                            <p:selectOneButton id="campCategoria" 
                                               value="#{managerCriarCampeonato.camp.categoria}"
                                               required="true"
                                               requiredMessage="Categoria é obrigatória">
                                <f:selectItem itemLabel="Individual" itemValue="INDIVIDUAL" />
                                <f:selectItem itemLabel="Times" itemValue="TIME" />
                            </p:selectOneButton>
                            <small class="block text-600 mt-2">
                                Defina se será individual ou por times
                            </small>
                        </div>

                        <p:divider />

                        <!-- Formato -->
                        <div class="field">
                            <label for="campTipo" class="block mb-3 font-medium">Formato *</label>
                            <div class="flex flex-column gap-3">
                                <p:selectOneRadio id="campTipo" 
                                                  value="#{managerCriarCampeonato.camp.tipoCampeonato}"
                                                  required="true"
                                                  requiredMessage="Formato é obrigatório">
                                    <f:selectItems value="#{enums.tipoCampeonato()}" />
                                </p:selectOneRadio>
                            </div>
                        </div>

                        <!-- Info Box -->
                        <div class="surface-100 border-round p-3 mt-4">
                            <div class="flex gap-2">
                                <i class="pi pi-info-circle text-primary"></i>
                                <div>
                                    <p class="font-semibold text-900 mt-0 mb-2">Sobre os formatos:</p>
                                    <ul class="text-700 mt-0 mb-0 pl-3">
                                        <li><strong>Suíço:</strong> Pontuações semelhantes se enfrentam</li>
                                        <li><strong>Mata-Mata:</strong> Eliminação direta</li>
                                        <li><strong>Pontos Corridos:</strong> Todos contra todos</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Card: Imagem -->
                <div class="col-12 lg:col-6">
                    <div class="surface-card shadow-2 border-round p-4 h-full">
                        <h2 class="text-900 font-bold text-2xl mb-4">
                            <i class="pi pi-image mr-2"></i>Imagem
                        </h2>

                        <!-- Preview -->
                        <div class="field mb-4">
                            <label class="block mb-3 font-medium">Logo/Banner</label>
                            
                            <p:outputPanel id="previewImagem" styleClass="block text-center mb-3">
                                <h:panelGroup rendered="#{managerCriarCampeonato.camp.anexo != null}">
                                    <p:graphicImage value="#{managerCriarCampeonato.camp.anexo.url}" 
                                                    alt="Logo"
                                                    styleClass="border-round shadow-2"
                                                    style="max-width: 100%; max-height: 300px; object-fit: cover;" />
                                </h:panelGroup>

                                <h:panelGroup rendered="#{managerCriarCampeonato.camp.anexo == null}">
                                    <div class="surface-100 border-round flex align-items-center justify-content-center border-2 border-dashed surface-border"
                                         style="height: 300px;">
                                        <div class="text-center">
                                            <i class="pi pi-image text-6xl text-400"></i>
                                            <p class="text-600 mt-2">Nenhuma imagem</p>
                                        </div>
                                    </div>
                                </h:panelGroup>
                            </p:outputPanel>

                            <p:fileUpload id="uploadImagem"
                                          mode="basic" 
                                          auto="true"
                                          chooseIcon="pi pi-upload"
                                          listener="#{managerCriarCampeonato.uploadImagem}"
                                          update="previewImagem"
                                          accept="image/*"
                                          invalidFileMessage="Formato inválido"
                                          invalidSizeMessage="Máximo 5MB"
                                          styleClass="p-button-outlined w-full" />

                            <small class="block text-600 mt-2 text-center">
                                JPG, PNG, GIF (máx. 5MB)
                            </small>
                        </div>

                        <p:divider />

                        <!-- Descrição -->
                        <div class="field">
                            <label for="campDescricao" class="block mb-2 font-medium">Descrição</label>
                            <p:inputTextarea id="campDescricao" 
                                             value="#{managerCriarCampeonato.camp.observacao}"
                                             rows="5" 
                                             placeholder="Informações adicionais..."
                                             autoResize="true"
                                             maxlength="500"
                                             styleClass="w-full" />
                            <small class="block text-600 mt-2">Máximo 500 caracteres</small>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Rodapé -->
            <div class="surface-card shadow-2 border-round mt-4 p-4">
                <div class="flex justify-content-end gap-2">
                    <p:commandButton value="Cancelar" 
                                     icon="pi pi-times"
                                     styleClass="p-button-outlined p-button-secondary"
                                     action="/campeonatos?faces-redirect=true"
                                     immediate="true"
                                     process="@this" />                    
                    <p:commandButton value="Criar Campeonato" 
                                     icon="pi pi-check"
                                     styleClass="p-button-success"
                                     action="#{managerCriarCampeonato.salvar()}"
                                     update="@form"
                                     onclick="if(!confirm('Criar campeonato?')) return false;" />
                </div>
            </div>

        </h:form>
    </ui:define>
</ui:composition>