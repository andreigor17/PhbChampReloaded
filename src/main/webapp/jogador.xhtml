<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="vercel.xhtml">

    <ui:define name="content">
        <div class="section-header">
            <div>
                <p:link outcome="jogadores.xhtml" styleClass="mb-3 d-block">
                    <i class="pi pi-arrow-left mr-2"></i>Voltar para Jogadores
                </p:link>
                <h1 class="section-title">Perfil do Jogador</h1>
            </div>
            <div>
                <p:button value="Editar" icon="pi pi-pencil" outcome="jogador.xhtml" styleClass="p-button-outlined mr-2" />
                <p:commandButton value="Excluir" icon="pi pi-trash" styleClass="p-button-danger p-button-outlined" />
            </div>
        </div>

        <h:form id="playerForm" enctype="multipart/form-data">
            <div class="grid">
                <!-- Informações Básicas com Avatar -->
                <div class="col-12 md:col-4 flex align-items-center justify-content-center flex-column">
                    <div class="mb-3">
                        <div class="player-photo-container">
                            <p:graphicImage id="playerPhoto" value="image/#{managerPlayer.player.anexo.nome}" styleClass="player-photo" rendered="#{managerPlayer.player.anexo ne null}"/>
                            <div class="player-photo-placeholder" style="#{managerPlayer.player.anexo eq null ?  '' : 'display: none'}">
                                <i class="pi pi-user" style="font-size: 5rem; color: #ccc;"></i>
                            </div>
                        </div>
                    </div>
                    <h2 class="player-name">#{managerPlayer.player.nome} - #{managerPlayer.player.sobreNome}</h2>
                    <p class="player-nickname">#{managerPlayer.player.nick}</p>
                    <div class="player-badges mt-2">
                        <p:badge value="Capitão" severity="info" styleClass="mr-2" />
                        <p:badge value="CS:GO" severity="success" styleClass="mr-2" />
                        <p:badge value="FIFA" severity="warning" />
                    </div>
                </div>

                <!-- Detalhes do Jogador -->
                <div class="col-12 md:col-8">
                    <p:card styleClass="mb-3">
                        <f:facet name="title">
                            <div class="flex align-items-center">
                                <i class="pi pi-user mr-2"></i>
                                <span>Informações Pessoais</span>
                            </div>
                        </f:facet>

                        <div class="player-info">
                            <div class="info-row">
                                <div class="info-label">Nome Completo</div>
                                <div class="info-value">#{managerPlayer.player.nome}</div>
                            </div>
                            <div class="info-row">
                                <div class="info-label">Nickname</div>
                                <div class="info-value">#{managerPlayer.player.nome}</div>
                            </div>
                            <div class="info-row">
                                <div class="info-label">E-mail</div>
                                <div class="info-value">joao.silva@email.com</div>
                            </div>
                            <div class="info-row">
                                <div class="info-label">Função</div>
                                <div class="info-value">Capitão</div>
                            </div>
                            <div class="info-row">
                                <div class="info-label">Time</div>
                                <div class="info-value">Team Alpha</div>
                            </div>
                        </div>
                    </p:card>

                    <p:card styleClass="mb-3">
                        <f:facet name="title">
                            <div class="flex align-items-center">
                                <i class="pi pi-desktop mr-2"></i>
                                <span>Informações da Steam</span>
                            </div>
                        </f:facet>

                        <div class="player-info">
                            <div class="info-row">
                                <div class="info-label">Steam ID</div>
                                <div class="info-value">#{managerPlayer.player.steamID}</div>
                            </div>
                            <div class="info-row">
                                <div class="info-label">URL do Perfil</div>
                                <div class="info-value">
                                    <p:link value="#{managerPlayer.player.urlSteam}" href="#{managerPlayer.player.urlSteam}" target="_blank" />
                                </div>
                            </div>
                        </div>
                    </p:card>
                </div>

                <!-- Estatísticas por Jogo -->
                <div class="col-12">
                    <h2 class="section-subtitle mb-3">Estatísticas por Jogo</h2>

                    <p:tabView>
                        <!-- CS:GO -->
                        <p:tab title="CS:GO">
                            <div class="grid">
                                <div class="col-12 md:col-3">
                                    <p:card styleClass="stats-card">
                                        <f:facet name="title">Visão Geral</f:facet>

                                        <div class="grid">
                                            <div class="col-6">
                                                <div class="stat-box">
                                                    <div class="stat-value">75%</div>
                                                    <div class="stat-label">Taxa de Vitória</div>
                                                </div>
                                            </div>
                                            <div class="col-6">
                                                <div class="stat-box">
                                                    <div class="stat-value">1.8</div>
                                                    <div class="stat-label">K/D Ratio</div>
                                                </div>
                                            </div>
                                            <div class="col-6">
                                                <div class="stat-box">
                                                    <div class="stat-value">24</div>
                                                    <div class="stat-label">Partidas</div>
                                                </div>
                                            </div>
                                            <div class="col-6">
                                                <div class="stat-box">
                                                    <div class="stat-value">18</div>
                                                    <div class="stat-label">Vitórias</div>
                                                </div>
                                            </div>
                                        </div>
                                    </p:card>
                                </div>

                                <div class="col-12 md:col-9">
                                    <div class="grid">
                                        <div class="col-12 md:col-6">
                                            <p:card styleClass="stats-card">
                                                <f:facet name="title">Desempenho por Mapa</f:facet>
                                                <p:barChart  model="#{null}" style="width: 100%; height: 250px;" />
                                            </p:card>
                                        </div>

                                        <div class="col-12 md:col-6">
                                            <p:card styleClass="stats-card">
                                                <f:facet name="title">Precisão por Arma</f:facet>
                                                <p:barChart model="#{null}" style="width: 100%; height: 250px;" />
                                            </p:card>
                                        </div>

                                        <div class="col-12">
                                            <p:card styleClass="stats-card">
                                                <f:facet name="title">Evolução de Desempenho</f:facet>
                                                <p:barChart model="#{null}" style="width: 100%; height: 250px;" />
                                            </p:card>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-12">
                                    <p:card styleClass="stats-card">
                                        <f:facet name="title">Estatísticas Detalhadas</f:facet>

                                        <div class="grid">
                                            <div class="col-12 md:col-4">
                                                <h3 class="stats-subtitle">Desempenho Geral</h3>
                                                <div class="player-info">
                                                    <div class="info-row">
                                                        <div class="info-label">Kills</div>
                                                        <div class="info-value">1,245</div>
                                                    </div>
                                                    <div class="info-row">
                                                        <div class="info-label">Deaths</div>
                                                        <div class="info-value">692</div>
                                                    </div>
                                                    <div class="info-row">
                                                        <div class="info-label">Assistências</div>
                                                        <div class="info-value">421</div>
                                                    </div>
                                                    <div class="info-row">
                                                        <div class="info-label">Headshots</div>
                                                        <div class="info-value">587</div>
                                                    </div>
                                                    <div class="info-row">
                                                        <div class="info-label">Headshot %</div>
                                                        <div class="info-value">47.1%</div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-12 md:col-4">
                                                <h3 class="stats-subtitle">Médias por Partida</h3>
                                                <div class="player-info">
                                                    <div class="info-row">
                                                        <div class="info-label">Kills</div>
                                                        <div class="info-value">21.5</div>
                                                    </div>
                                                    <div class="info-row">
                                                        <div class="info-label">Deaths</div>
                                                        <div class="info-value">12.3</div>
                                                    </div>
                                                    <div class="info-row">
                                                        <div class="info-label">Assistências</div>
                                                        <div class="info-value">7.8</div>
                                                    </div>
                                                    <div class="info-row">
                                                        <div class="info-label">Dano por Rodada</div>
                                                        <div class="info-value">95.4</div>
                                                    </div>
                                                    <div class="info-row">
                                                        <div class="info-label">Pontuação Média</div>
                                                        <div class="info-value">85.7</div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-12 md:col-4">
                                                <h3 class="stats-subtitle">Armas Favoritas</h3>
                                                <div class="player-info">
                                                    <div class="info-row">
                                                        <div class="info-label">AK-47</div>
                                                        <div class="info-value">42%</div>
                                                    </div>
                                                    <div class="info-row">
                                                        <div class="info-label">M4A4</div>
                                                        <div class="info-value">28%</div>
                                                    </div>
                                                    <div class="info-row">
                                                        <div class="info-label">AWP</div>
                                                        <div class="info-value">15%</div>
                                                    </div>
                                                    <div class="info-row">
                                                        <div class="info-label">Desert Eagle</div>
                                                        <div class="info-value">8%</div>
                                                    </div>
                                                    <div class="info-row">
                                                        <div class="info-label">Outras</div>
                                                        <div class="info-value">7%</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </p:card>
                                </div>
                            </div>
                        </p:tab>

                        <!-- FIFA -->
                        <p:tab title="FIFA">
                            <div class="grid">
                                <div class="col-12 md:col-3">
                                    <p:card styleClass="stats-card">
                                        <f:facet name="title">Visão Geral</f:facet>

                                        <div class="grid">
                                            <div class="col-6">
                                                <div class="stat-box">
                                                    <div class="stat-value">68%</div>
                                                    <div class="stat-label">Taxa de Vitória</div>
                                                </div>
                                            </div>
                                            <div class="col-6">
                                                <div class="stat-box">
                                                    <div class="stat-value">2.4</div>
                                                    <div class="stat-label">Gols/Partida</div>
                                                </div>
                                            </div>
                                            <div class="col-6">
                                                <div class="stat-box">
                                                    <div class="stat-value">32</div>
                                                    <div class="stat-label">Partidas</div>
                                                </div>
                                            </div>
                                            <div class="col-6">
                                                <div class="stat-box">
                                                    <div class="stat-value">22</div>
                                                    <div class="stat-label">Vitórias</div>
                                                </div>
                                            </div>
                                        </div>
                                    </p:card>
                                </div>

                                <div class="col-12 md:col-9">
                                    <div class="grid">
                                        <div class="col-12 md:col-6">
                                            <p:card styleClass="stats-card">
                                                <f:facet name="title">Times Mais Utilizados</f:facet>
                                                <p:barChart model="#{null}" style="width: 100%; height: 250px;" />
                                            </p:card>
                                        </div>

                                        <div class="col-12 md:col-6">
                                            <p:card styleClass="stats-card">
                                                <f:facet name="title">Estatísticas de Jogo</f:facet>
                                                <p:barChart model="#{null}" style="width: 100%; height: 250px;" />
                                            </p:card>
                                        </div>

                                        <div class="col-12">
                                            <p:card styleClass="stats-card">
                                                <f:facet name="title">Histórico de Partidas</f:facet>
                                                <p:barChart model="#{null}" style="width: 100%; height: 250px;" />
                                            </p:card>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-12">
                                    <p:card styleClass="stats-card">
                                        <f:facet name="title">Estatísticas Detalhadas</f:facet>

                                        <div class="grid">
                                            <div class="col-12 md:col-4">
                                                <h3 class="stats-subtitle">Desempenho Ofensivo</h3>
                                                <div class="player-info">
                                                    <div class="info-row">
                                                        <div class="info-label">Gols Marcados</div>
                                                        <div class="info-value">78</div>
                                                    </div>
                                                    <div class="info-row">
                                                        <div class="info-label">Assistências</div>
                                                        <div class="info-value">42</div>
                                                    </div>
                                                    <div class="info-row">
                                                        <div class="info-label">Finalizações</div>
                                                        <div class="info-value">245</div>
                                                    </div>
                                                    <div class="info-row">
                                                        <div class="info-label">Precisão de Chute</div>
                                                        <div class="info-value">31.8%</div>
                                                    </div>
                                                    <div class="info-row">
                                                        <div class="info-label">Posse de Bola</div>
                                                        <div class="info-value">58%</div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-12 md:col-4">
                                                <h3 class="stats-subtitle">Desempenho Defensivo</h3>
                                                <div class="player-info">
                                                    <div class="info-row">
                                                        <div class="info-label">Gols Sofridos</div>
                                                        <div class="info-value">45</div>
                                                    </div>
                                                    <div class="info-row">
                                                        <div class="info-label">Desarmes</div>
                                                        <div class="info-value">156</div>
                                                    </div>
                                                    <div class="info-row">
                                                        <div class="info-label">Interceptações</div>
                                                        <div class="info-value">187</div>
                                                    </div>
                                                    <div class="info-row">
                                                        <div class="info-label">Faltas Cometidas</div>
                                                        <div class="info-value">68</div>
                                                    </div>
                                                    <div class="info-row">
                                                        <div class="info-label">Cartões</div>
                                                        <div class="info-value">12A / 2V</div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-12 md:col-4">
                                                <h3 class="stats-subtitle">Jogadores Favoritos</h3>
                                                <div class="player-info">
                                                    <div class="info-row">
                                                        <div class="info-label">Messi</div>
                                                        <div class="info-value">24 gols</div>
                                                    </div>
                                                    <div class="info-row">
                                                        <div class="info-label">Mbappé</div>
                                                        <div class="info-value">18 gols</div>
                                                    </div>
                                                    <div class="info-row">
                                                        <div class="info-label">Neymar</div>
                                                        <div class="info-value">15 gols</div>
                                                    </div>
                                                    <div class="info-row">
                                                        <div class="info-label">De Bruyne</div>
                                                        <div class="info-value">22 assistências</div>
                                                    </div>
                                                    <div class="info-row">
                                                        <div class="info-label">Van Dijk</div>
                                                        <div class="info-value">45 desarmes</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </p:card>
                                </div>
                            </div>
                        </p:tab>

                        <!-- Ping Pong -->
                        <p:tab title="Ping Pong">
                            <div class="grid">
                                <div class="col-12 md:col-3">
                                    <p:card styleClass="stats-card">
                                        <f:facet name="title">Visão Geral</f:facet>

                                        <div class="grid">
                                            <div class="col-6">
                                                <div class="stat-box">
                                                    <div class="stat-value">82%</div>
                                                    <div class="stat-label">Taxa de Vitória</div>
                                                </div>
                                            </div>
                                            <div class="col-6">
                                                <div class="stat-box">
                                                    <div class="stat-value">3.2</div>
                                                    <div class="stat-label">Sets/Partida</div>
                                                </div>
                                            </div>
                                            <div class="col-6">
                                                <div class="stat-box">
                                                    <div class="stat-value">18</div>
                                                    <div class="stat-label">Partidas</div>
                                                </div>
                                            </div>
                                            <div class="col-6">
                                                <div class="stat-box">
                                                    <div class="stat-value">15</div>
                                                    <div class="stat-label">Vitórias</div>
                                                </div>
                                            </div>
                                        </div>
                                    </p:card>
                                </div>

                                <div class="col-12 md:col-9">
                                    <div class="grid">
                                        <div class="col-12 md:col-6">
                                            <p:card styleClass="stats-card">
                                                <f:facet name="title">Pontos por Set</f:facet>
                                                <p:barChart model="#{null}" style="width: 100%; height: 250px;" />
                                            </p:card>
                                        </div>

                                        <div class="col-12 md:col-6">
                                            <p:card styleClass="stats-card">
                                                <f:facet name="title">Desempenho por Adversário</f:facet>
                                                <p:barChart model="#{null}" style="width: 100%; height: 250px;" />
                                            </p:card>
                                        </div>

                                        <div class="col-12">
                                            <p:card styleClass="stats-card">
                                                <f:facet name="title">Evolução de Desempenho</f:facet>
                                                <p:barChart model="#{null}" style="width: 100%; height: 250px;" />
                                            </p:card>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-12">
                                    <p:card styleClass="stats-card">
                                        <f:facet name="title">Estatísticas Detalhadas</f:facet>

                                        <div class="grid">
                                            <div class="col-12 md:col-4">
                                                <h3 class="stats-subtitle">Desempenho Geral</h3>
                                                <div class="player-info">
                                                    <div class="info-row">
                                                        <div class="info-label">Sets Vencidos</div>
                                                        <div class="info-value">42</div>
                                                    </div>
                                                    <div class="info-row">
                                                        <div class="info-label">Sets Perdidos</div>
                                                        <div class="info-value">15</div>
                                                    </div>
                                                    <div class="info-row">
                                                        <div class="info-label">Pontos Marcados</div>
                                                        <div class="info-value">685</div>
                                                    </div>
                                                    <div class="info-row">
                                                        <div class="info-label">Pontos Sofridos</div>
                                                        <div class="info-value">512</div>
                                                    </div>
                                                    <div class="info-row">
                                                        <div class="info-label">Média de Pontos</div>
                                                        <div class="info-value">11.4 por set</div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-12 md:col-4">
                                                <h3 class="stats-subtitle">Técnicas</h3>
                                                <div class="player-info">
                                                    <div class="info-row">
                                                        <div class="info-label">Aces</div>
                                                        <div class="info-value">48</div>
                                                    </div>
                                                    <div class="info-row">
                                                        <div class="info-label">Smashes</div>
                                                        <div class="info-value">124</div>
                                                    </div>
                                                    <div class="info-row">
                                                        <div class="info-label">Drops</div>
                                                        <div class="info-value">87</div>
                                                    </div>
                                                    <div class="info-row">
                                                        <div class="info-label">Erros Não-Forçados</div>
                                                        <div class="info-value">65</div>
                                                    </div>
                                                    <div class="info-row">
                                                        <div class="info-label">Precisão de Saque</div>
                                                        <div class="info-value">78%</div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-12 md:col-4">
                                                <h3 class="stats-subtitle">Torneios</h3>
                                                <div class="player-info">
                                                    <div class="info-row">
                                                        <div class="info-label">Torneios Disputados</div>
                                                        <div class="info-value">5</div>
                                                    </div>
                                                    <div class="info-row">
                                                        <div class="info-label">Torneios Vencidos</div>
                                                        <div class="info-value">2</div>
                                                    </div>
                                                    <div class="info-row">
                                                        <div class="info-label">Melhor Colocação</div>
                                                        <div class="info-value">1º lugar</div>
                                                    </div>
                                                    <div class="info-row">
                                                        <div class="info-label">Ranking Atual</div>
                                                        <div class="info-value">3º</div>
                                                    </div>
                                                    <div class="info-row">
                                                        <div class="info-label">Pontos no Ranking</div>
                                                        <div class="info-value">1,250</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </p:card>
                                </div>
                            </div>
                        </p:tab>

                        <!-- Adicionar Jogo -->
                        <p:tab title="+ Adicionar Jogo">
                            <div class="grid">
                                <div class="col-12">
                                    <p:card styleClass="stats-card">
                                        <div class="flex align-items-center justify-content-center flex-column p-5">
                                            <i class="pi pi-plus-circle" style="font-size: 3rem; color: #ccc; margin-bottom: 1rem;"></i>
                                            <h3>Adicionar Novo Jogo</h3>
                                            <p class="text-center mb-4">Selecione um jogo para adicionar estatísticas para este jogador</p>

                                            <div class="formgrid grid">
                                                <div class="field col-12 md:col-6">
                                                    <p:outputLabel for="novoJogo" value="Selecione o Jogo" />
                                                    <p:selectOneMenu id="novoJogo">
                                                        <f:selectItem itemLabel="Selecione um jogo" itemValue="" />
                                                        <f:selectItem itemLabel="Valorant" itemValue="valorant" />
                                                        <f:selectItem itemLabel="League of Legends" itemValue="lol" />
                                                        <f:selectItem itemLabel="Dota 2" itemValue="dota2" />
                                                        <f:selectItem itemLabel="Fortnite" itemValue="fortnite" />
                                                        <f:selectItem itemLabel="Outro" itemValue="outro" />
                                                    </p:selectOneMenu>
                                                </div>

                                                <div class="field col-12 md:col-6">
                                                    <p:outputLabel for="outroJogo" value="Especifique (se Outro)" />
                                                    <p:inputText id="outroJogo" placeholder="Nome do jogo" />
                                                </div>
                                            </div>

                                            <p:commandButton value="Adicionar Jogo" icon="pi pi-plus" styleClass="mt-3" />
                                        </div>
                                    </p:card>
                                </div>
                            </div>
                        </p:tab>
                    </p:tabView>
                </div>

                <!-- Histórico de Partidas -->
                <div class="col-12">
                    <h2 class="section-subtitle mb-3">Histórico de Partidas</h2>

                    <p:card>
                        <p:dataTable var="partida" value="#{null}" styleClass="border-none"
                                     emptyMessage="Nenhuma partida registrada" rows="5" paginator="true"
                                     paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     currentPageReportTemplate="Mostrando {first} a {last} de {totalRecords} partidas"
                                     rowsPerPageTemplate="5,10,20">

                            <p:column headerText="Data" style="width: 120px">
                                <h:outputText value="10/04/2023" />
                            </p:column>

                            <p:column headerText="Jogo">
                                <h:outputText value="CS:GO" />
                            </p:column>

                            <p:column headerText="Campeonato">
                                <h:outputText value="Copa de eSports 2023" />
                            </p:column>

                            <p:column headerText="Time">
                                <h:outputText value="Team Alpha" />
                            </p:column>

                            <p:column headerText="Adversário">
                                <h:outputText value="Team Beta" />
                            </p:column>

                            <p:column headerText="Resultado" style="width: 120px">
                                <span class="match-result win">Vitória (16-10)</span>
                            </p:column>

                            <p:column headerText="Ações" style="width: 100px">
                                <p:button icon="pi pi-eye" styleClass="p-button-text p-button-sm" />
                            </p:column>
                        </p:dataTable>
                    </p:card>
                </div>
            </div>
        </h:form>

        <!-- Estilos específicos para a visualização do jogador -->
        <style type="text/css">
            .player-photo-container {
                width: 200px;
                height: 200px;
                border-radius: 50% !important;
                overflow: hidden;
                background-color: #f8f9fa;
                display: flex;
                align-items: center;
                justify-content: center;
                border: 1px solid #dee2e6;
            }

            .player-photo {
                width: 100%;
                height: 100%;
                object-fit: cover;
            }

            .player-photo-placeholder {
                align-items: center;
                justify-content: center;
                width: 100%;
                height: 100%;
                background-color: #f8f9fa;
            }

            .player-name {
                font-size: 1.5rem;
                font-weight: 700;
                margin: 1rem 0 0.25rem;
                text-align: center;
            }

            .player-nickname {
                font-size: 1.1rem;
                color: #6c757d;
                margin: 0 0 0.5rem;
                text-align: center;
            }

            .section-subtitle {
                font-size: 1.5rem;
                font-weight: 600;
                margin-top: 2rem;
                color: #343a40;
            }

            .stats-subtitle {
                font-size: 1.1rem;
                font-weight: 600;
                margin-bottom: 1rem;
                color: #495057;
            }

            .stats-card {
                height: 100%;
            }

            .match-result {
                font-weight: 500;
                padding: 0.25rem 0.5rem;
                border-radius: 0.25rem;
            }

            .match-result.win {
                background-color: rgba(40, 167, 69, 0.1);
                color: #28a745;
            }

            .match-result.loss {
                background-color: rgba(220, 53, 69, 0.1);
                color: #dc3545;
            }

            .match-result.draw {
                background-color: rgba(108, 117, 125, 0.1);
                color: #6c757d;
            }
        </style>
    </ui:define>
</ui:composition>