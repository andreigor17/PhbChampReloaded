<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="vercel.xhtml">

    <ui:define name="content">
        <h:form id="headerForm">
            <div class="section-header">
                <div>
                    <p:link outcome="jogadores.xhtml" styleClass="mb-3 d-block header-back-link">
                        <i class="pi pi-arrow-left mr-2"></i>Voltar para Jogadores
                    </p:link>
                    <h1 class="section-title">Perfil do Jogador</h1>
                </div>
                <div class="header-actions">
                    <p:button value="Editar" icon="pi pi-pencil" href="criarJogador.xhtml?id=#{managerPlayer.player.id}" rendered="#{managerPlayer.verificarPermissao()}" styleClass="header-action-btn header-action-btn--primary" />
                    <p:commandButton value="Excluir" icon="pi pi-trash" styleClass="header-action-btn header-action-btn--danger" 
                                     rendered="#{managerPlayer.isUsuarioLogado() and managerPlayer.isAdmin()}"
                                     action="#{managerPlayer.removerPlayer()}"
                                     onclick="if(confirm('Tem certeza que deseja excluir este jogador?')) { return true; } else { return false; }"
                                     update="@form"/>
                </div>
            </div>

            <!-- HERO: Cabeçalho do Jogador (perfil Steam) -->
            <div class="player-hero">
                <div class="player-hero-left">
                    <div class="player-hero-avatar">
                        <p:graphicImage value="image/#{managerPlayer.player.anexo.nome}" styleClass="player-hero-photo" rendered="#{managerPlayer.player.anexo ne null}"/>
                        <div class="player-hero-photo placeholder" style="#{managerPlayer.player.anexo eq null ? '' : 'display:none'}">
                            <i class="pi pi-user"></i>
                        </div>
                        <span class="status-dot #{managerPlayer.statusConta eq 'Pública' ? 'online' : 'offline'}" title="#{managerPlayer.statusConta}"></span>
                    </div>
                    <div class="player-hero-info">
                        <div class="player-hero-name">#{managerPlayer.player.nome} #{managerPlayer.player.sobreNome}
                            <span class="player-hero-nick">@#{managerPlayer.player.nick}</span>
                        </div>
                        <div class="player-hero-meta">
                            <span class="meta-item">
                                <i class="pi pi-id-card"></i>
                                <span class="ellipsis">#{managerPlayer.player.steamID}</span>
                                <p:commandButton icon="pi pi-copy" type="button" styleClass="p-button-rounded p-button-text p-button-sm ml-1" title="Copiar Steam ID" onclick="navigator.clipboard.writeText('#{managerPlayer.player.steamID}');return false;"/>
                            </span>
                            <span class="meta-sep">•</span>
                            <span class="meta-item"><i class="pi pi-bolt"></i>Nível #{managerPlayer.steamLevel}</span>
                            <span class="meta-sep">•</span>
                            <span class="meta-item"><i class="pi pi-clock"></i>#{managerPlayer.formattedPlaytime}</span>
                        </div>
                        <div class="player-hero-actions">
                            <p:link value="Perfil Steam" href="#{managerPlayer.profileUrl}" target="_blank" styleClass="p-button p-component p-button-sm p-button-outlined neon-link" rendered="#{not empty managerPlayer.profileUrl}">
                                <i class="pi pi-external-link mr-2"></i>
                            </p:link>
                            <p:tag value="#{managerPlayer.statusConta}" severity="#{managerPlayer.statusConta eq 'Pública' ? 'success' : 'warning'}" rounded="true" styleClass="ml-2"/>
                        </div>
                    </div>
                </div>
                <div class="player-hero-right">
                    <div class="mini-kpis">
                        <div class="mini-kpi">
                            <i class="pi pi-game"></i>
                            <div class="mini-kpi-value">#{managerPlayer.gameCount}</div>
                            <div class="mini-kpi-label">Jogos</div>
                        </div>
                        <div class="mini-kpi">
                            <i class="pi pi-users"></i>
                            <div class="mini-kpi-value">#{managerPlayer.friendCount}</div>
                            <div class="mini-kpi-label">Amigos</div>
                        </div>
                        <div class="mini-kpi">
                            <i class="pi pi-star"></i>
                            <div class="mini-kpi-value">#{managerPlayer.steamLevel}</div>
                            <div class="mini-kpi-label">Nível</div>
                        </div>
                    </div>
                </div>
            </div>
        </h:form>

        <h:form id="playerForm" enctype="multipart/form-data">

            <p:remoteCommand name="atualizarCardSteam" update="steamInfoPanel" />
            <p:remoteCommand name="carregarDadosSteam" actionListener="#{managerPlayer.carregarDadosRemote()}"
                             process="@this" />


            <div class="grid">
                <!-- Informações Básicas (sem avatar - agora no hero) -->
                <div class="col-12 md:col-4">
                    <p:card styleClass="mb-3 glass-card">
                        <f:facet name="title">
                            <div class="section-card-title">
                                <i class="pi pi-user"></i>
                                <span class="title-text">Perfil</span>
                            </div>
                        </f:facet>
                        <div class="p-fluid">
                            <div class="formgrid grid">
                                <div class="field col-12">
                                    <p:outputLabel value="Nome" styleClass="block font-medium text-300" />
                                    <div class="text-field-display">#{managerPlayer.player.nome} #{managerPlayer.player.sobreNome}</div>
                                </div>
                                <div class="field col-12">
                                    <p:outputLabel value="Nickname" styleClass="block font-medium text-300" />
                                    <div class="text-field-display">#{managerPlayer.player.nick}</div>
                                </div>
                            </div>
                        </div>
                    </p:card>
                    
                    <!-- Card de Rating -->
                    <p:card styleClass="mb-3 glass-card">
                        <f:facet name="title">
                            <div class="section-card-title">
                                <i class="pi pi-star"></i>
                                <span class="title-text">Rating</span>
                            </div>
                        </f:facet>
                        <h:panelGroup id="playerRatingPanel" layout="block" styleClass="player-rating-panel">
                            <div class="player-rating-display">
                                <div class="rating-circle">
                                    <svg class="rating-svg" viewBox="0 0 120 120">
                                        <circle class="rating-bg" cx="60" cy="60" r="52" />
                                        <circle class="rating-progress" cx="60" cy="60" r="52" 
                                                style="stroke-dasharray: #{managerPlayer.player.rating ne null ? (managerPlayer.player.rating * 32.67) : 0} 326.7;" />
                                    </svg>
                                    <div class="rating-content">
                                        <h:panelGroup rendered="#{managerPlayer.player.rating ne null}">
                                            <span class="rating-number">
                                                <h:outputText value="#{managerPlayer.player.rating}">
                                                    <f:convertNumber minFractionDigits="1" maxFractionDigits="1"/>
                                                </h:outputText>
                                            </span>
                                        </h:panelGroup>
                                        <h:panelGroup rendered="#{managerPlayer.player.rating eq null}">
                                            <span class="rating-number">--</span>
                                        </h:panelGroup>
                                        <span class="rating-label">/ 10</span>
                                    </div>
                                </div>
                                <div class="rating-info">
                                    <h:panelGroup rendered="#{managerPlayer.player.rating eq null}">
                                        <span class="rating-status-text muted">Não avaliado</span>
                                    </h:panelGroup>
                                    <h:panelGroup rendered="#{managerPlayer.player.rating ne null}">
                                        <span class="rating-status-text">Avaliado pela administração</span>
                                    </h:panelGroup>
                                </div>
                            </div>

                            <h:panelGroup rendered="#{managerPlayer.isAdmin()}" styleClass="player-rating-admin">
                                <p:outputLabel value="Avaliar jogador" styleClass="admin-label" />
                                <p:rating value="#{managerPlayer.ratingTemp}" stars="10" cancel="false" styleClass="player-rating-stars"/>
                                <p:commandButton value="Salvar avaliação" icon="pi pi-save"
                                                 styleClass="rating-save-btn"
                                                 actionListener="#{managerPlayer.salvarRating()}"
                                                 process="@form" update="playerRatingPanel"/>
                            </h:panelGroup>

                            <h:panelGroup rendered="#{not managerPlayer.isAdmin()}" styleClass="player-rating-hint">
                                <i class="pi pi-info-circle"></i>
                                <span>Apenas administradores podem avaliar jogadores</span>
                            </h:panelGroup>
                        </h:panelGroup>
                    </p:card>
                    
                    <div class="player-badges mt-2 text-center">
                        <ui:repeat value="#{managerPlayer.player.jogos}" var="jogo">
                            <span class="game-badge" style="background-color: #{jogo.corHex ne null ? jogo.corHex : '#00e1ff'};">
                                #{jogo.nome}
                            </span>
                        </ui:repeat>
                    </div>
                </div>

                <!-- Detalhes do Jogador -->
                <div class="col-12 md:col-8">
                    <p:card styleClass="mb-3 glass-card info-card">
                        <f:facet name="title">
                            <div class="section-card-title">
                                <i class="pi pi-id-card"></i>
                                <span class="title-text">Informações Pessoais</span>
                            </div>
                        </f:facet>

                        <div class="p-fluid">
                            <div class="formgrid grid">
                                <div class="field col-12 md:col-6">
                                    <div class="info-field">
                                        <i class="pi pi-user field-icon"></i>
                                        <div class="info-field-content">
                                            <p:outputLabel value="Nome Completo" styleClass="info-label" />
                                            <div class="info-value">#{managerPlayer.player.nome} #{managerPlayer.player.sobreNome}</div>
                                        </div>
                                    </div>
                                </div>

                                <div class="field col-12 md:col-6">
                                    <div class="info-field">
                                        <i class="pi pi-at field-icon"></i>
                                        <div class="info-field-content">
                                            <p:outputLabel value="Nickname" styleClass="info-label" />
                                            <div class="info-value">#{managerPlayer.player.nick}</div>
                                        </div>
                                    </div>
                                </div>

                                <div class="field col-12 md:col-6">
                                    <div class="info-field">
                                        <i class="pi pi-star field-icon"></i>
                                        <div class="info-field-content">
                                            <p:outputLabel value="Função" styleClass="info-label" />
                                            <div class="info-value">
                                                <p:chip label="Capitão" styleClass="role-chip" icon="pi pi-shield"/>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="field col-12 md:col-6">
                                    <div class="info-field">
                                        <i class="pi pi-calendar field-icon"></i>
                                        <div class="info-field-content">
                                            <p:outputLabel value="Data de Nascimento" styleClass="info-label" />
                                            <p:outputLabel styleClass="info-value" value="#{managerPlayer.player.dataNascimento}">
                                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                                            </p:outputLabel>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </p:card>

                    <p:card styleClass="mb-3 glass-card">
                        <f:facet name="title">
                            <div class="section-card-title">
                                <i class="pi pi-desktop"></i>
                                <span class="title-text">Informações da Steam</span>
                            </div>
                        </f:facet>

                        <div class="p-fluid">                                                        
                            <h:panelGroup id="steamInfoPanel">
                                <h:panelGroup rendered="#{managerPlayer.loading eq true}">
                                    <div class="formgrid grid">
                                        <div class="field col-12 md:col-6">
                                            <p:outputLabel value="Steam ID" styleClass="block font-medium text-900" />
                                            <div class="text-field-display">
                                                <p:skeleton width="80%" height="24px" />
                                            </div>
                                        </div>

                                        <div class="field col-12 md:col-6">
                                            <p:outputLabel value="URL do Perfil" styleClass="block font-medium text-900" />
                                            <div class="text-field-display">
                                                <p:skeleton width="90%" height="24px" />
                                            </div>
                                        </div>

                                        <div class="field col-12 md:col-6">
                                            <p:outputLabel value="Nível Steam" styleClass="block font-medium text-900" />
                                            <div class="text-field-display">
                                                <p:skeleton width="70%" height="12px" styleClass="mb-2" />
                                                <p:skeleton width="30%" height="18px" />
                                            </div>
                                        </div>

                                        <div class="field col-12 md:col-6">
                                            <p:outputLabel value="Status da Conta" styleClass="block font-medium text-900" />
                                            <div class="text-field-display">
                                                <p:skeleton width="40%" height="24px" borderRadius="16px" />
                                            </div>
                                        </div>
                                    </div>

                                    <div class="steam-stats mt-3">
                                        <div class="grid">
                                            <div class="col-4">
                                                <div class="steam-stat-box">
                                                    <p:skeleton width="60%" height="28px" styleClass="mb-2" />
                                                    <p:skeleton width="80%" height="18px" />
                                                </div>
                                            </div>
                                            <div class="col-4">
                                                <div class="steam-stat-box">
                                                    <p:skeleton width="60%" height="28px" styleClass="mb-2" />
                                                    <p:skeleton width="80%" height="18px" />
                                                </div>
                                            </div>
                                            <div class="col-4">
                                                <div class="steam-stat-box">
                                                    <p:skeleton width="60%" height="28px" styleClass="mb-2" />
                                                    <p:skeleton width="80%" height="18px" />
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </h:panelGroup>
                                <h:panelGroup rendered="#{managerPlayer.profileLoaded eq true}">
                                    <div class="formgrid grid">
                                        <div class="field col-12 md:col-6">
                                            <p:outputLabel value="Steam ID" styleClass="block font-medium text-900" />
                                            <div class="text-field-display">
                                                <span class="steam-id">#{managerPlayer.player.steamID}</span>
                                                <p:commandButton icon="pi pi-copy" 
                                                                 styleClass="p-button-rounded p-button-text p-button-sm" 
                                                                 title="Copiar Steam ID"
                                                                 onclick="navigator.clipboard.writeText('#{managerPlayer.player.steamID}');return false;" />
                                            </div>
                                        </div>

                                        <div class="field col-12 md:col-6">
                                            <p:outputLabel value="URL do Perfil" styleClass="block font-medium text-900" />
                                            <div class="text-field-display">
                                                <p:link value="#{managerPlayer.profileUrl}" 
                                                        href="#{managerPlayer.profileUrl}" 
                                                        target="_blank">
                                                    <i class="pi pi-external-link ml-2" style="font-size: 0.8rem"></i>
                                                </p:link>
                                            </div>
                                        </div>

                                        <div class="field col-12 md:col-6">
                                            <p:outputLabel value="Nível Steam" styleClass="block font-medium text-900" />
                                            <div class="text-field-display">
                                                <p:progressBar value="#{managerPlayer.steamLevel}" 
                                                               displayOnly="true" 
                                                               styleClass="steam-level-progress" />
                                                <span class="steam-level-text">Nível #{managerPlayer.steamLevel}</span>
                                            </div>
                                        </div>

                                        <div class="field col-12 md:col-6">
                                            <p:outputLabel value="Status da Conta" styleClass="block font-medium text-900" />
                                            <div class="text-field-display">
                                                <p:tag value="#{managerPlayer.statusConta}" 
                                                       severity="#{managerPlayer.statusConta eq 'Pública' ? 'success' : 'warning'}" 
                                                       rounded="true" />
                                            </div>
                                        </div>
                                    </div>

                                    <div class="steam-stats mt-3">
                                        <div class="grid">
                                            <div class="col-4">
                                                <div class="steam-stat-box">
                                                    <div class="steam-stat-value">#{managerPlayer.gameCount}</div>
                                                    <div class="steam-stat-label">Jogos</div>
                                                </div>
                                            </div>
                                            <div class="col-4">
                                                <div class="steam-stat-box">
                                                    <div class="steam-stat-value">#{managerPlayer.friendCount}</div>
                                                    <div class="steam-stat-label">Amigos</div>
                                                </div>
                                            </div>
                                            <div class="col-4">
                                                <div class="steam-stat-box">
                                                    <div class="steam-stat-value">#{managerPlayer.formattedPlaytime}</div>
                                                    <div class="steam-stat-label">Tempo de Jogo</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </h:panelGroup>

                                <!-- Exibir mensagem quando não há dados ou perfil é privado -->
                                <p:outputPanel rendered="#{managerPlayer.error}">
                                    <div class="flex align-items-center justify-content-center flex-column p-4">
                                        <i class="pi pi-lock" style="font-size: 2rem; color: #6c757d; margin-bottom: 1rem;"></i>
                                        <h3>Dados não disponíveis</h3>
                                        <p class="text-center">Os dados da Steam não puderam ser carregados. O perfil pode estar privado ou ocorreu um erro na API.</p>
                                    </div>
                                </p:outputPanel>

                                <!-- Exibir mensagem quando não há Steam ID -->
                                <p:outputPanel rendered="#{managerPlayer.player.steamID == null or managerPlayer.player.steamID == ''}">
                                    <div class="flex align-items-center justify-content-center flex-column p-4">
                                        <i class="pi pi-info-circle" style="font-size: 2rem; color: #6c757d; margin-bottom: 1rem;"></i>
                                        <h3>Steam ID não configurado</h3>
                                        <p class="text-center">Este jogador não possui um Steam ID configurado. Edite o perfil para adicionar.</p>
                                    </div>
                                </p:outputPanel>
                            </h:panelGroup>
                        </div>
                    </p:card>
                </div>
                <div class="col-12">
                    <p:card styleClass="mb-3 glass-card">
                        <f:facet name="title">
                            <div class="section-card-title">
                                <i class="pi pi-chart-bar"></i>
                                <span class="title-text">Estatísticas Resumidas</span>
                            </div>
                        </f:facet>

                        <div class="grid">
                            <div class="col-12 md:col-3">
                                <div class="stats-summary-box">
                                    <i class="pi pi-chart-bar stats-icon"></i>
                                    <div class="stats-summary-value">42</div>
                                    <div class="stats-summary-label">Partidas Totais</div>
                                </div>
                            </div>

                            <div class="col-12 md:col-3">
                                <div class="stats-summary-box win-box">
                                    <i class="pi pi-check-circle stats-icon"></i>
                                    <div class="stats-summary-value">28</div>
                                    <div class="stats-summary-label">Vitórias</div>
                                </div>
                            </div>

                            <div class="col-12 md:col-3">
                                <div class="stats-summary-box loss-box">
                                    <i class="pi pi-times-circle stats-icon"></i>
                                    <div class="stats-summary-value">14</div>
                                    <div class="stats-summary-label">Derrotas</div>
                                </div>
                            </div>

                            <div class="col-12 md:col-3">
                                <div class="stats-summary-box stats-summary-action">
                                    <p:button value="Ver estatísticas completas" icon="pi pi-chart-line" 
                                               styleClass="p-button-outlined full-stats-btn">
                                        <f:param name="id" value="#{jogador.id}" />
                                    </p:button>
                                </div>
                            </div>
                        </div>
                    </p:card>
                </div>

                <!-- Estatísticas de Desempenho (somente atributos existentes em ManagerPlayer) -->
                <div class="col-12">
                    <p:card styleClass="mb-3 glass-card">
                        <f:facet name="title">
                            <div class="section-card-title">
                                <i class="pi pi-sliders-h"></i>
                                <span class="title-text">Estatísticas de Desempenho</span>
                            </div>
                        </f:facet>
                        <div class="grid">
                            <div class="col-12 md:col-3">
                                <div class="stats-summary-box">
                                    <div class="stats-summary-label">Jogos</div>
                                    <div class="stats-summary-value">#{managerPlayer.gameCount}</div>
                                    <p:progressBar value="#{managerPlayer.gameCount gt 500 ? 100 : (managerPlayer.gameCount * 100) / 500}" displayOnly="true" styleClass="steam-level-progress"/>
                                </div>
                            </div>
                            <div class="col-12 md:col-3">
                                <div class="stats-summary-box">
                                    <div class="stats-summary-label">Amigos</div>
                                    <div class="stats-summary-value">#{managerPlayer.friendCount}</div>
                                    <p:progressBar value="#{managerPlayer.friendCount gt 200 ? 100 : (managerPlayer.friendCount * 100) / 200}" displayOnly="true" styleClass="steam-level-progress"/>
                                </div>
                            </div>
                            <div class="col-12 md:col-3">
                                <div class="stats-summary-box">
                                    <div class="stats-summary-label">Nível Steam</div>
                                    <div class="stats-summary-value">#{managerPlayer.steamLevel}</div>
                                    <p:progressBar value="#{managerPlayer.steamLevel gt 100 ? 100 : managerPlayer.steamLevel}" displayOnly="true" styleClass="steam-level-progress"/>
                                </div>
                            </div>
                            <div class="col-12 md:col-3">
                                <div class="stats-summary-box">
                                    <div class="stats-summary-label">Tempo de Jogo</div>
                                    <div class="stats-summary-value">#{managerPlayer.formattedPlaytime}</div>
                                    <p:progressBar value="#{managerPlayer.totalPlaytime gt 1000 ? 100 : (managerPlayer.totalPlaytime * 100) / 1000}" displayOnly="true" styleClass="steam-level-progress"/>
                                </div>
                            </div>
                        </div>
                    </p:card>
                </div>

                <!-- NOVO: Card de Últimas Partidas (Colapsável) -->
                <div class="col-12">
                    <p:panel header="Últimas Partidas" toggleable="true" collapsed="false" toggleSpeed="500" styleClass="mb-3 glass-panel">
                        <f:facet name="header">
                            <div class="section-card-title">
                                <i class="pi pi-history"></i>
                                <span class="title-text">Últimas Partidas</span>
                            </div>
                        </f:facet>

                        <p:dataTable var="partida" value="#{null}" styleClass="elegant-table" lazy="false"
                                     emptyMessage="Nenhuma partida registrada" rows="5" paginator="true"
                                     paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     currentPageReportTemplate="Mostrando {first} a {last} de {totalRecords} partidas"
                                     rowsPerPageTemplate="5,10,20">

                            <p:column headerText="Data" style="width: 140px">
                                <div class="table-cell-content">
                                    <i class="pi pi-calendar cell-icon"></i>
                                    <h:outputText value="10/04/2023" />
                                </div>
                            </p:column>

                            <p:column headerText="Campeonato">
                                <div class="table-cell-content">
                                    <i class="pi pi-trophy cell-icon"></i>
                                    <h:outputText value="Copa de eSports 2023" />
                                </div>
                            </p:column>

                            <p:column headerText="Jogo" style="width: 120px">
                                <div class="table-cell-content">
                                    <i class="pi pi-desktop cell-icon"></i>
                                    <h:outputText value="CS:GO" />
                                </div>
                            </p:column>

                            <p:column headerText="Time">
                                <div class="table-team">
                                    <div class="team-logo-small">
                                        <i class="pi pi-users"></i>
                                    </div>
                                    <span>Team Alpha</span>
                                </div>
                            </p:column>

                            <p:column headerText="Adversário">
                                <div class="table-team">
                                    <div class="team-logo-small">
                                        <i class="pi pi-users"></i>
                                    </div>
                                    <span>Team Beta</span>
                                </div>
                            </p:column>

                            <p:column headerText="Placar" style="width: 140px">
                                <div class="match-score-wrapper">
                                    <div class="match-score">
                                        <span class="team-score winner">16</span>
                                        <span class="score-separator">:</span>
                                        <span class="team-score">10</span>
                                    </div>
                                    <span class="match-result win">
                                        <i class="pi pi-check-circle"></i>
                                        Vitória
                                    </span>
                                </div>
                            </p:column>

                            <p:column headerText="Ações" style="width: 100px">
                                <p:button icon="pi pi-eye" styleClass="p-button-rounded p-button-text p-button-sm action-btn" outcome="partida.xhtml" title="Ver detalhes">
                                    <f:param name="id" value="1" />
                                </p:button>
                            </p:column>
                        </p:dataTable>
                        <p:tooltip globalSelector=".match-result" position="top" showEffect="fade"/>
                    </p:panel>
                </div>

            </div>
        </h:form>

        <!-- Estilos específicos para a visualização do jogador (tema dark gamer) -->
        <style type="text/css">
            :root {
                --bg-900: #0f1217;
                --bg-800: #141923;
                --bg-700: #1a2030;
                --text-100: #e6ebf2;
                --text-300: #b7c1d1;
                --muted: #8b93a6;
                --accent: #00e1ff; /* azul elétrico */
                --accent-2: #ff8a3d; /* laranja queimado */
                --success: #22c55e;
                --danger: #ef4444;
                --warning: #f59e0b;
                --surface-shadow: 0 10px 30px rgba(0, 0, 0, 0.35);
                --ring: 0 0 0 1px rgba(0, 225, 255, 0.12), 0 0 20px rgba(0, 225, 255, 0.06);
                --radius: 14px;
            }

            body, .ui-widget, .ui-widget .ui-widget {
                color: var(--text-100);
            }

            .section-header {
                margin-bottom: 1rem;
            }
            .section-card-title{
                display: inline-flex;
                align-items: center;
                gap: .55rem;
                letter-spacing: .5px;
                text-transform: uppercase;
                font-size: .85rem;
                font-weight: 700;
                color: var(--text-300);
            }
            .section-card-title .title-text{
                color: var(--text-100);
                font-size: 1rem;
                letter-spacing: .35px;
            }
            .section-card-title .pi{
                color: var(--accent);
                font-size: 1.05rem;
            }
            .header-actions{
                display: flex;
                align-items: center;
                gap: .75rem;
            }
            .header-action-btn{
                display: inline-flex !important;
                align-items: center;
                gap: .45rem;
                padding: .55rem 1.2rem !important;
                border-radius: 999px !important;
                background: linear-gradient(135deg, rgba(0,225,255,0.15), rgba(0,225,255,0.06)) !important;
                border: 1px solid rgba(0,225,255,0.3) !important;
                color: var(--text-100) !important;
                font-weight: 600 !important;
                letter-spacing: .4px;
                text-transform: uppercase;
                transition: transform .18s ease, box-shadow .18s ease, background .18s ease, border-color .18s ease;
            }
            .header-action-btn .pi{
                font-size: 1rem;
                color: inherit !important;
            }
            .header-action-btn:hover{
                transform: translateY(-1px);
                box-shadow: 0 12px 28px rgba(0,225,255,0.18);
                border-color: rgba(0,225,255,0.45) !important;
                background: linear-gradient(135deg, rgba(0,225,255,0.22), rgba(0,225,255,0.1)) !important;
            }
            .header-action-btn--primary{
                background: linear-gradient(135deg, rgba(0,225,255,0.2), rgba(0,225,255,0.08)) !important;
                border-color: rgba(0,225,255,0.45) !important;
            }
            .header-action-btn--primary:hover{
                box-shadow: 0 14px 32px rgba(0,225,255,0.24);
            }
            .header-action-btn--danger{
                background: linear-gradient(135deg, rgba(239,68,68,0.2), rgba(239,68,68,0.08)) !important;
                border: 1px solid rgba(239,68,68,0.45) !important;
            }
            .header-action-btn--danger:hover{
                box-shadow: 0 14px 32px rgba(239,68,68,0.25);
                border-color: rgba(239,68,68,0.6) !important;
                background: linear-gradient(135deg, rgba(239,68,68,0.28), rgba(239,68,68,0.12)) !important;
            }

            /* Rating Panel - Minimalista e Elegante */
            .player-rating-panel{
                display: flex;
                flex-direction: column;
                align-items: center;
                gap: 1.5rem;
                padding: 1.5rem 1rem;
            }
            
            /* Display do Rating com SVG Circle */
            .player-rating-display{
                display: flex;
                flex-direction: column;
                align-items: center;
                gap: 1rem;
                width: 100%;
            }
            
            .rating-circle{
                position: relative;
                width: 140px;
                height: 140px;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            .rating-svg{
                width: 140px;
                height: 140px;
                transform: rotate(-90deg);
            }
            
            .rating-bg{
                fill: none;
                stroke: rgba(255,255,255,0.06);
                stroke-width: 8;
            }
            
            .rating-progress{
                fill: none;
                stroke: var(--accent);
                stroke-width: 8;
                stroke-linecap: round;
                transition: stroke-dasharray 0.6s ease;
                filter: drop-shadow(0 0 6px rgba(0,225,255,0.4));
            }
            
            .rating-content{
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                text-align: center;
            }
            
            .rating-number{
                font-size: 2.5rem;
                font-weight: 800;
                color: var(--text-100);
                line-height: 1;
                letter-spacing: -1px;
            }
            
            .rating-label{
                font-size: .75rem;
                color: var(--muted);
                font-weight: 600;
                margin-top: .25rem;
            }
            
            .rating-info{
                text-align: center;
            }
            
            .rating-status-text{
                font-size: .8rem;
                color: var(--text-300);
                font-weight: 500;
            }
            
            .rating-status-text.muted{
                color: var(--muted);
            }
            
            /* Admin Section */
            .player-rating-admin{
                display: flex;
                flex-direction: column;
                gap: 1rem;
                align-items: center;
                padding-top: 1.5rem;
                border-top: 1px solid rgba(255,255,255,0.06);
                width: 100%;
            }
            
            .player-rating-admin .admin-label{
                font-size: .75rem;
                text-transform: uppercase;
                letter-spacing: .8px;
                color: var(--text-300);
                font-weight: 700;
                margin-bottom: 0;
            }
            
            .player-rating-stars .ui-rating{
                display: flex;
                gap: .35rem;
            }
            
            .player-rating-stars .ui-rating-star a{
                color: rgba(255,255,255,0.15) !important;
                font-size: 1.15rem;
                transition: all .2s ease;
            }
            
            .player-rating-stars .ui-rating-star a:hover{
                color: rgba(0,225,255,0.5) !important;
                transform: scale(1.15);
            }
            
            .player-rating-stars .ui-rating-star-on a{
                color: var(--accent) !important;
            }
            
            .rating-save-btn{
                display: inline-flex !important;
                align-items: center;
                gap: .5rem;
                padding: .5rem 1.25rem !important;
                border-radius: 8px !important;
                background: linear-gradient(135deg, rgba(0,225,255,0.12), rgba(0,225,255,0.06)) !important;
                border: 1px solid rgba(0,225,255,0.25) !important;
                color: var(--text-100) !important;
                font-weight: 600 !important;
                font-size: .8rem !important;
                transition: all .2s ease !important;
            }
            
            .rating-save-btn:hover{
                transform: translateY(-1px);
                box-shadow: 0 8px 20px rgba(0,225,255,0.2);
                background: linear-gradient(135deg, rgba(0,225,255,0.18), rgba(0,225,255,0.1)) !important;
                border-color: rgba(0,225,255,0.4) !important;
            }
            
            /* Hint Section */
            .player-rating-hint{
                display: flex;
                align-items: center;
                gap: .5rem;
                padding: .75rem 1rem;
                background: rgba(255,255,255,0.02);
                border-radius: 8px;
                border: 1px solid rgba(255,255,255,0.04);
                color: var(--muted);
                font-size: .75rem;
                width: 100%;
                justify-content: center;
            }
            
            .player-rating-hint .pi{
                font-size: .9rem;
            }

            .header-back-link {
                color: var(--text-300) !important;
                transition: color .2s ease, transform .2s ease;
            }
            .header-back-link:hover { color: var(--accent) !important; transform: translateX(-2px); }

            .player-hero {
                display: flex;
                flex-wrap: wrap;
                align-items: center;
                justify-content: space-between;
                background: radial-gradient(1200px 400px at 0% 0%, rgba(0, 225, 255, 0.08), transparent),
                            radial-gradient(1000px 400px at 100% 0%, rgba(255, 138, 61, 0.06), transparent),
                            linear-gradient(180deg, var(--bg-800), var(--bg-900));
                border: 1px solid rgba(255,255,255,0.06);
                border-radius: var(--radius);
                padding: 1.25rem 1.5rem;
                margin-bottom: 1.5rem;
                box-shadow: var(--surface-shadow);
            }

            .player-hero-left { display: flex; align-items: center; gap: 1rem; }

            .player-hero-avatar { position: relative; width: 96px; height: 96px; }
            .player-hero-photo { width: 100%; height: 100%; border-radius: 50%; object-fit: cover; border: 2px solid rgba(255,255,255,0.08); box-shadow: var(--ring); }
            .player-hero-photo.placeholder { display: flex; align-items: center; justify-content: center; background: var(--bg-700); border-radius: 50%; color: var(--muted); font-size: 2rem; }
            .status-dot { position: absolute; right: 4px; bottom: 4px; width: 14px; height: 14px; border-radius: 50%; border: 2px solid var(--bg-800); box-shadow: 0 0 0 2px rgba(0,0,0,0.2); }
            .status-dot.online { background: var(--success); box-shadow: 0 0 12px rgba(34,197,94,0.6); }
            .status-dot.offline { background: #64748b; }

            .player-hero-info { display: flex; flex-direction: column; gap: .35rem; }
            .player-hero-name { font-size: 1.35rem; font-weight: 700; letter-spacing: 0.2px; }
            .player-hero-nick { color: var(--muted); font-weight: 500; margin-left: .5rem; font-size: .95rem; }
            .player-hero-meta { color: var(--text-300); display: flex; flex-wrap: wrap; gap: .5rem; align-items: center; }
            .player-hero-meta .meta-item { display: inline-flex; align-items: center; gap: .4rem; }
            .player-hero-meta .meta-sep { opacity: .4; }
            .ellipsis { max-width: 220px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; display: inline-block; vertical-align: bottom; }

            .player-hero-actions .neon-link { border-color: rgba(0,225,255,0.35) !important; color: var(--text-100) !important; }
            .player-hero-actions .neon-link:hover { box-shadow: var(--ring); border-color: rgba(0,225,255,0.6) !important; }

            .player-hero-right { display: flex; align-items: center; }
            .mini-kpis { display: grid; grid-template-columns: repeat(3, minmax(92px, 1fr)); gap: .75rem; }
            .mini-kpi { background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border: 1px solid rgba(255,255,255,0.06); border-radius: 12px; padding: .6rem .75rem; text-align: center; transition: transform .2s ease, box-shadow .2s ease; }
            .mini-kpi:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(0,0,0,0.35); }
            .mini-kpi i { color: var(--accent); display: block; margin-bottom: .25rem; }
            .mini-kpi-value { font-weight: 800; font-size: 1.1rem; }
            .mini-kpi-label { color: var(--muted); font-size: .8rem; }

            /* Cards e painéis */
            .glass-card, .glass-panel .ui-panel-content, .p-card { background: linear-gradient(180deg, var(--bg-800), var(--bg-900)) !important; border: 1px solid rgba(255,255,255,0.06) !important; border-radius: var(--radius) !important; box-shadow: var(--surface-shadow) !important; }
            .p-card .p-card-title, .ui-panel-titlebar { color: var(--text-100) !important; }
            .p-card .p-card-body { padding-top: .75rem; }

            /* Campos de exibição */
            .text-field-display { color: var(--text-100); background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.06); padding: .5rem .75rem; border-radius: 10px; }
            .font-medium.text-300 { color: var(--text-300) !important; }
            
            /* Info Card melhorado */
            .info-field { 
                display: flex; gap: .75rem; align-items: flex-start; 
                padding: .85rem 1rem; border-radius: 12px; 
                background: linear-gradient(135deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
                border: 1px solid rgba(255,255,255,0.04);
                transition: all .2s ease;
            }
            .info-field:hover { 
                background: linear-gradient(135deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02));
                border-color: rgba(0,225,255,0.15);
                transform: translateY(-1px);
            }
            .info-field .field-icon { 
                color: var(--accent); font-size: 1.15rem; 
                margin-top: .15rem; min-width: 20px;
            }
            .info-field-content { flex: 1; }
            .info-label { 
                font-size: .8rem; color: var(--text-300) !important; 
                text-transform: uppercase; letter-spacing: .5px; font-weight: 600;
                display: block; margin-bottom: .25rem;
            }
            .info-value { 
                color: var(--text-100); font-size: 1rem; font-weight: 500; 
            }
            .role-chip { 
                background: linear-gradient(135deg, rgba(0,225,255,0.15), rgba(0,225,255,0.08)) !important;
                border: 1px solid rgba(0,225,255,0.25) !important;
                color: var(--accent) !important;
                font-weight: 600;
            }

            /* Tabela elegante */
            .elegant-table .ui-datatable-tablewrapper table { border-collapse: separate; border-spacing: 0 10px; }
            .elegant-table thead tr th { 
                background: rgba(255,255,255,0.02) !important; 
                color: var(--text-300) !important;
                text-transform: uppercase; font-size: .75rem; letter-spacing: .8px;
                font-weight: 700; border: none !important;
                padding: .75rem 1rem !important;
            }
            .elegant-table .ui-datatable-data > tr { 
                background: linear-gradient(135deg, var(--bg-800), var(--bg-900));
                border: 1px solid rgba(255,255,255,0.06);
                border-radius: 10px;
                transition: all .2s ease;
            }
            .elegant-table .ui-datatable-data > tr:hover { 
                transform: translateY(-3px); 
                box-shadow: 0 12px 28px rgba(0,0,0,0.4), 0 0 0 1px rgba(0,225,255,0.1);
                background: linear-gradient(135deg, var(--bg-700), var(--bg-800));
            }
            .elegant-table .ui-datatable-data > tr td { 
                border: none !important; 
                padding: 1rem !important; 
                vertical-align: middle;
            }
            .elegant-table .ui-paginator { 
                background: transparent; border: none; 
                color: var(--text-300); margin-top: 1rem;
            }
            
            /* Células da tabela */
            .table-cell-content { display: flex; align-items: center; gap: .5rem; }
            .table-cell-content .cell-icon { color: var(--accent); font-size: .9rem; opacity: .7; }
            
            .table-team { display: flex; align-items: center; gap: .65rem; }
            .team-logo-small { 
                width: 32px; height: 32px; border-radius: 8px;
                background: linear-gradient(135deg, rgba(0,225,255,0.1), rgba(0,225,255,0.05));
                border: 1px solid rgba(0,225,255,0.2);
                display: flex; align-items: center; justify-content: center;
                color: var(--accent); font-size: .9rem;
            }
            
            /* Placar e resultado */
            .match-score-wrapper { display: flex; flex-direction: column; gap: .35rem; }
            .match-score { 
                display: flex; align-items: center; gap: .5rem; 
                font-weight: 800; font-size: 1.15rem;
            }
            .team-score { color: var(--text-100); }
            .team-score.winner { color: var(--success); }
            .score-separator { color: var(--muted); font-weight: 400; }
            
            .match-result { 
                display: inline-flex; align-items: center; gap: .35rem;
                font-weight: 600; font-size: .8rem;
                padding: .35rem .65rem; border-radius: 999px; 
                letter-spacing: .3px; width: fit-content;
            }
            .match-result.win { 
                background: rgba(34,197,94,0.12); 
                color: var(--success);
                border: 1px solid rgba(34,197,94,0.25);
            }
            .match-result.loss { 
                background: rgba(239,68,68,0.12); 
                color: var(--danger);
                border: 1px solid rgba(239,68,68,0.25);
            }
            .match-result.draw { 
                background: rgba(245,158,11,0.12); 
                color: var(--warning);
                border: 1px solid rgba(245,158,11,0.25);
            }
            .match-result i { font-size: .75rem; }
            
            /* Botão de ação */
            .action-btn { 
                background: rgba(0,225,255,0.08) !important;
                border: 1px solid rgba(0,225,255,0.2) !important;
                color: var(--accent) !important;
            }
            .action-btn:hover { 
                background: rgba(0,225,255,0.15) !important;
                box-shadow: 0 0 0 1px rgba(0,225,255,0.3), 0 0 18px rgba(0,225,255,0.12) !important;
            }

            /* Stats Summary Boxes */
            .stats-summary-box {
                background: linear-gradient(135deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
                border: 1px solid rgba(255,255,255,0.06);
                border-radius: 12px;
                padding: 1.25rem 1rem;
                text-align: center;
                transition: all .25s ease;
                position: relative;
                overflow: hidden;
            }
            .stats-summary-box::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                height: 3px;
                background: linear-gradient(90deg, var(--accent), var(--accent-2));
                opacity: 0;
                transition: opacity .25s ease;
            }
            .stats-summary-box:hover {
                transform: translateY(-3px);
                box-shadow: 0 12px 28px rgba(0,0,0,0.4);
                border-color: rgba(0,225,255,0.2);
            }
            .stats-summary-box:hover::before { opacity: 1; }
            
            .stats-summary-box .stats-icon {
                font-size: 1.75rem;
                color: var(--accent);
                margin-bottom: .5rem;
                display: block;
            }
            .stats-summary-value {
                font-size: 2rem;
                font-weight: 800;
                color: var(--text-100);
                margin-bottom: .25rem;
            }
            .stats-summary-label {
                font-size: .85rem;
                color: var(--text-300);
                text-transform: uppercase;
                letter-spacing: .5px;
                font-weight: 600;
            }
            
            .stats-summary-box.win-box .stats-icon { color: var(--success); }
            .stats-summary-box.win-box .stats-summary-value { color: var(--success); }
            .stats-summary-box.win-box::before { background: var(--success); }
            
            .stats-summary-box.loss-box .stats-icon { color: var(--danger); }
            .stats-summary-box.loss-box .stats-summary-value { color: var(--danger); }
            .stats-summary-box.loss-box::before { background: var(--danger); }
            
            .stats-summary-action {
                display: flex;
                align-items: center;
                justify-content: center;
                background: linear-gradient(135deg, rgba(0,225,255,0.05), rgba(0,225,255,0.02));
                border-color: rgba(0,225,255,0.15);
            }
            .full-stats-btn {
                border-color: rgba(0,225,255,0.35) !important;
                color: var(--accent) !important;
            }
            .full-stats-btn:hover {
                background: rgba(0,225,255,0.1) !important;
                box-shadow: 0 0 0 1px rgba(0,225,255,0.3), 0 0 20px rgba(0,225,255,0.1) !important;
            }
            
            /* Badges dos Jogos */
            .player-badges {
                display: flex;
                flex-wrap: wrap;
                gap: .5rem;
                justify-content: center;
            }
            
            .game-badge {
                display: inline-block;
                padding: .35rem .85rem;
                border-radius: 999px;
                font-size: .8rem;
                font-weight: 600;
                color: white;
                text-shadow: 0 1px 2px rgba(0,0,0,0.3);
                box-shadow: 0 2px 8px rgba(0,0,0,0.15);
                transition: all .2s ease;
            }
            
            .game-badge:hover {
                transform: translateY(-2px);
                box-shadow: 0 4px 12px rgba(0,0,0,0.25);
            }

            /* Steam stats e progress */
            .steam-stat-box {
                background: linear-gradient(135deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
                border: 1px solid rgba(255,255,255,0.06);
                border-radius: 12px;
                padding: 1rem;
                text-align: center;
                transition: all .2s ease;
            }
            .steam-stat-box:hover {
                transform: translateY(-2px);
                box-shadow: 0 8px 20px rgba(0,0,0,0.35);
                border-color: rgba(0,225,255,0.15);
            }
            .steam-stat-value {
                font-size: 1.5rem;
                font-weight: 800;
                color: var(--text-100);
                margin-bottom: .35rem;
            }
            .steam-stat-label {
                font-size: .8rem;
                color: var(--text-300);
                text-transform: uppercase;
                letter-spacing: .5px;
                font-weight: 600;
            }
            .steam-level-progress { 
                height: 10px !important; 
                border-radius: 999px !important; 
                box-shadow: inset 0 0 0 1px rgba(255,255,255,0.06);
                background: rgba(255,255,255,0.03) !important;
            }
            .steam-level-progress .p-progressbar-value {
                background: linear-gradient(90deg, var(--accent), var(--accent-2)) !important;
            }
            .steam-level-text { margin-left: .5rem; color: var(--text-300); font-weight: 600; }

            /* Microinterações */
            .p-button, .ui-button { transition: transform .15s ease, box-shadow .15s ease; }
            .p-button:hover, .ui-button:hover { transform: translateY(-1px); box-shadow: var(--surface-shadow); }

            /* Responsividade */
            @media (max-width: 768px) {
                .player-hero { gap: 1rem; }
                .player-hero-right { width: 100%; margin-top: .5rem; }
                .mini-kpis { width: 100%; grid-template-columns: repeat(3, 1fr); }
            }
        </style>

        <script>
            $(document).ready(function () {
                carregarDadosSteam();
            });
        </script>

    </ui:define>
</ui:composition>